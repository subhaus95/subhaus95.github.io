<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HOWTO ‚Äî Loom</title>
<meta name="description" content="A complete reference for building, configuring, and writing content for the Loom Jekyll theme.">

<!-- Dark mode flash prevention ‚Äî runs synchronously before first paint -->
<script>
  (function () {
    var s = localStorage.getItem('loom-dark');
    var dark = s !== null ? s === '1' : window.matchMedia('(prefers-color-scheme: dark)').matches;
    document.documentElement.dataset.theme = dark ? 'dark' : 'light';
  })();
</script>

<!-- Preconnect to CDN domains used by the viz runtime -->
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="preconnect" href="https://unpkg.com">
<link rel="preconnect" href="https://esm.sh">
<link rel="preconnect" href="https://api.mapbox.com">
<link rel="preconnect" href="https://events.mapbox.com">



<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap" rel="stylesheet">

<!-- Theme stylesheet (Vite build output) -->
<link rel="stylesheet" href="/assets/built/main.css">



<!-- Syntax highlighting (Rouge ‚Äî light + dark) -->
<link rel="stylesheet" href="/assets/css/syntax.css">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>HOWTO | Loom</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="HOWTO" />
<meta name="author" content="Paul Hobson" />
<meta property="og:locale" content="en" />
<meta name="description" content="A complete reference for building, configuring, and writing content for the Loom Jekyll theme." />
<meta property="og:description" content="A complete reference for building, configuring, and writing content for the Loom Jekyll theme." />
<link rel="canonical" href="/howto/" />
<meta property="og:url" content="/howto/" />
<meta property="og:site_name" content="Loom" />
<meta property="og:image" content="/assets/images/og-default.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2026-02-25T00:00:00-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="/assets/images/og-default.png" />
<meta property="twitter:title" content="HOWTO" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Paul Hobson"},"dateModified":"2026-02-25T02:11:53-07:00","datePublished":"2026-02-25T00:00:00-07:00","description":"A complete reference for building, configuring, and writing content for the Loom Jekyll theme.","headline":"HOWTO","image":"/assets/images/og-default.png","mainEntityOfPage":{"@type":"WebPage","@id":"/howto/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/loom_collective.jpg"},"name":"Paul Hobson"},"url":"/howto/"}</script>
<!-- End Jekyll SEO tag -->




</head>
<body class="
  essay-template
   tag-meta
  
  
  
  
  
  
  
">

<a href="#main-content" class="skip-link">Skip to content</a>

<header class="nav" x-data="{ open: false }">
  <div class="nav-inner">

    <!-- Logo -->
    <a href="/" class="nav-logo">
      <img loading="lazy" src="/assets/images/loom_collective.jpg" alt="Loom" width="32" height="32">
      Loom<span>.</span>
    </a>

    <!-- Desktop nav links -->
    <ul class="nav-links" role="list">
      
      <li>
        <a href="/">Home</a>
      </li>
      
      <li>
        <a href="/topics/">Topics</a>
      </li>
      
      <li>
        <a href="/archive/">Archive</a>
      </li>
      
    </ul>

    <!-- Actions -->
    <div class="nav-actions">

      <!-- Search button -->
      <button
        class="search-toggle"
        type="button"
        aria-label="Search (‚åòK)"
        title="Search (‚åòK)"
        @click="$dispatch('search:open')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
      </button>

      <!-- Dark mode toggle -->
      <button
        class="theme-toggle"
        x-data="darkMode"
        x-init="init()"
        @click="toggle()"
        :aria-label="dark ? 'Switch to light mode' : 'Switch to dark mode'"
        type="button"
      >
        <!-- Sun icon (shown in light mode) -->
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <!-- Moon icon (shown in dark mode) -->
        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>

      <!-- Hamburger (mobile only) -->
      <button
        class="mobile-nav-toggle"
        @click="open = !open"
        :aria-expanded="open"
        :aria-label="open ? 'Close menu' : 'Open menu'"
        type="button"
      >
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
        <svg x-show="open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>

    </div><!-- /.nav-actions -->
  </div><!-- /.nav-inner -->

  <!-- Mobile drawer -->
  <div
    class="mobile-nav"
    x-show="open"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-1"
    x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 -translate-y-1"
    @click.outside="open = false"
    @keydown.escape.window="open = false"
  >
    <ul role="list">
      
      <li>
        <a href="/" @click="open = false">Home</a>
      </li>
      
      <li>
        <a href="/topics/" @click="open = false">Topics</a>
      </li>
      
      <li>
        <a href="/archive/" @click="open = false">Archive</a>
      </li>
      
    </ul>
  </div><!-- /.mobile-nav -->

</header>


<div id="main-content">
  <!-- Essay stylesheet and runtime ‚Äî self-contained -->
<link rel="stylesheet" href="/assets/css/essay.css">
<script type="module" src="/assets/js/essay/core.js"></script>

<div class="essay-layout" id="essay-layout">

  <!-- essay-toc.html ‚Äî Sticky table of contents (left column).
     The <ol> is empty on load; assets/js/essay/core.js populates it
     from h2/h3 elements found in #essay-content after the page renders. -->

<nav class="essay-toc" id="essay-toc" aria-label="Table of contents">
  <div class="essay-toc-inner">
    <p class="essay-toc-heading" aria-hidden="true">Contents</p>
    <ol class="essay-toc-list" id="essay-toc-list">
      <!-- Populated at runtime by assets/js/essay/core.js buildToc() -->
    </ol>
  </div>
</nav>


  <main class="essay-main" id="essay-main" role="main">
    <article class="essay-article">

      <!-- essay-hero.html ‚Äî Header for computational essay template.
     Displays feature image, tag label, title, excerpt, and post metadata. -->

<header class="essay-hero">
  
  <figure class="essay-hero-figure">
    <img
      src="/assets/images/og-default.png"
      alt="HOWTO"
      class="essay-hero-img"
      loading="eager"
    >
    
  </figure>
  

  <div class="essay-hero-body">
    
    <a href="/topic/meta/" class="essay-tag-label">meta</a>
    

    <h1 class="essay-title">HOWTO</h1>

    
    <p class="essay-excerpt">A complete reference for building, configuring, and writing content for the Loom Jekyll theme.</p>
    

    <div class="essay-meta">
      <div class="essay-authors">
        <span class="essay-author">
          
          








  
  
    
<a href="/author/paul-hobson/" class="author-link">Paul Hobson</a>
    
  
  


        </span>
      </div>
      <div class="essay-meta-secondary">
        <time class="essay-date" datetime="2026-02-25">25 Feb 2026</time>
        
        
        <span class="essay-sep" aria-hidden="true">¬∑</span>
        <span class="essay-updated">Updated <time datetime="2026-02-25">25 Feb 2026</time></span>
        
        <span class="essay-sep" aria-hidden="true">¬∑</span>
        <span class="essay-reading-time">39 min read</span>
      </div>
    </div>
  </div>
</header>


      


      <div class="essay-content gh-content" id="essay-content">
        <h1 id="loom--theme-reference">Loom ‚Äî Theme Reference</h1>

<p>A complete reference for building, configuring, and writing content for the Loom Jekyll theme.</p>

<hr />

<h2 id="1-prerequisites">1. Prerequisites</h2>

<table>
  <thead>
    <tr>
      <th>Tool</th>
      <th>Required version</th>
      <th>Check</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ruby</td>
      <td>3.3</td>
      <td><code class="language-plaintext highlighter-rouge">ruby -v</code></td>
    </tr>
    <tr>
      <td>Bundler</td>
      <td>any recent</td>
      <td><code class="language-plaintext highlighter-rouge">bundler -v</code></td>
    </tr>
    <tr>
      <td>Node.js</td>
      <td>20</td>
      <td><code class="language-plaintext highlighter-rouge">node -v</code></td>
    </tr>
    <tr>
      <td>npm</td>
      <td>bundled with Node 20</td>
      <td><code class="language-plaintext highlighter-rouge">npm -v</code></td>
    </tr>
  </tbody>
</table>

<p>Install Ruby gems:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">install</span>
</code></pre></div></div>

<p>Install Node packages:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span>
</code></pre></div></div>

<hr />

<h2 id="2-local-development">2. Local development</h2>

<p>Two processes run in parallel during development.</p>

<p><strong>Terminal 1 ‚Äî build CSS and JavaScript (Vite):</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run dev
</code></pre></div></div>

<p>Vite watches <code class="language-plaintext highlighter-rouge">src/main.css</code> and <code class="language-plaintext highlighter-rouge">src/main.js</code>, rebuilds to <code class="language-plaintext highlighter-rouge">assets/built/</code> on change.</p>

<p><strong>Terminal 2 ‚Äî run Jekyll:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve <span class="nt">--livereload</span>
</code></pre></div></div>

<p>Site is available at <code class="language-plaintext highlighter-rouge">http://localhost:4000</code>.</p>

<blockquote>
  <p><strong>Note on search:</strong> Pagefind requires a completed <code class="language-plaintext highlighter-rouge">_site/</code> directory to index. Search will return no results in local development unless you run the indexer manually after a full build:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run build <span class="o">&amp;&amp;</span> bundle <span class="nb">exec </span>jekyll build <span class="o">&amp;&amp;</span> npx pagefind <span class="nt">--site</span> _site
</code></pre></div>  </div>

  <p>Then start the Jekyll server pointing at the already-built <code class="language-plaintext highlighter-rouge">_site/</code>:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve <span class="nt">--skip-initial-build</span>
</code></pre></div>  </div>
</blockquote>

<hr />

<h2 id="3-configuration">3. Configuration</h2>

<p>All site-wide settings live in <code class="language-plaintext highlighter-rouge">_config.yml</code>.</p>

<h3 id="core-identity">Core identity</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">title</span><span class="pi">:</span> <span class="s">LoomCollective</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">Clean typography, dark mode, computational essays.</span>
<span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://loomcollective.ai"</span>   <span class="c1"># Full URL including scheme, no trailing slash</span>
<span class="na">baseurl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>                        <span class="c1"># Empty for apex domains; "/path" for subpaths</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Your Name</span>
<span class="na">lang</span><span class="pi">:</span> <span class="s">en</span>
</code></pre></div></div>

<h3 id="permalink-and-pagination">Permalink and pagination</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">permalink</span><span class="pi">:</span> <span class="s">/:title/</span>                <span class="c1"># Post URLs: /my-post-slug/</span>
<span class="na">future</span><span class="pi">:</span> <span class="kc">true</span>                       <span class="c1"># Publish posts with future dates</span>

<span class="na">pagination</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">per_page</span><span class="pi">:</span> <span class="m">12</span>
  <span class="na">permalink</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/page/:num/"</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">:title</span><span class="nv"> </span><span class="s">‚Äî</span><span class="nv"> </span><span class="s">page</span><span class="nv"> </span><span class="s">:num"</span>
  <span class="na">trail</span><span class="pi">:</span>
    <span class="na">before</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">after</span><span class="pi">:</span> <span class="m">2</span>
</code></pre></div></div>

<h3 id="navigation-menus">Navigation menus</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Header ‚Äî main nav links</span>
<span class="na">navigation</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">Home</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">Topics</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/topics/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">Archive</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/archive/</span>

<span class="c1"># Footer ‚Äî secondary links (About, RSS, etc.)</span>
<span class="na">secondary_navigation</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">About</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/about/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">RSS</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/feed.xml</span>
</code></pre></div></div>

<h3 id="social-links">Social links</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">twitter</span><span class="pi">:</span> <span class="s">your_handle</span>      <span class="c1"># X/Twitter username only, no @</span>
<span class="na">facebook</span><span class="pi">:</span> <span class="s">your_page</span>       <span class="c1"># Facebook page name</span>
</code></pre></div></div>

<p>Both are optional ‚Äî remove the key or leave blank to hide the icon in the footer.</p>

<h3 id="analytics">Analytics</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">analytics_token</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>       <span class="c1"># Cloudflare Web Analytics token</span>
</code></pre></div></div>

<p>See <a href="#10-analytics">¬ß10 Analytics</a> for setup.</p>

<h3 id="comments">Comments</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">giscus</span><span class="pi">:</span>
  <span class="na">repo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>                <span class="c1"># Owner/repo ‚Äî e.g., pauldhobson/loomcollective</span>
  <span class="na">repo_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>             <span class="c1"># From giscus.app</span>
  <span class="na">category</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Announcements"</span>
  <span class="na">category_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>         <span class="c1"># From giscus.app</span>
</code></pre></div></div>

<p>See <a href="#9-comments">¬ß9 Comments</a> for setup.</p>

<h3 id="archive-pages">Archive pages</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jekyll-archives</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">categories</span>          <span class="c1"># Generates /topic/:name/ pages</span>
    <span class="pi">-</span> <span class="s">tags</span>                <span class="c1"># Generates /tag/:name/ pages</span>
  <span class="na">layouts</span><span class="pi">:</span>
    <span class="na">category</span><span class="pi">:</span> <span class="s">topic</span>
    <span class="na">tag</span><span class="pi">:</span> <span class="s">tag</span>
  <span class="na">permalinks</span><span class="pi">:</span>
    <span class="na">category</span><span class="pi">:</span> <span class="s">/topic/:name/</span>
    <span class="na">tag</span><span class="pi">:</span> <span class="s">/tag/:name/</span>
</code></pre></div></div>

<h3 id="default-front-matter">Default front matter</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">defaults</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">_posts"</span>
    <span class="na">values</span><span class="pi">:</span>
      <span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">/assets/images/og-default.png</span>   <span class="c1"># Fallback OG image</span>
  <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">_pages"</span>
    <span class="na">values</span><span class="pi">:</span>
      <span class="na">layout</span><span class="pi">:</span> <span class="s">default</span>
</code></pre></div></div>

<hr />

<h2 id="4-writing-posts">4. Writing posts</h2>

<h3 id="file-naming">File naming</h3>

<p>Create files in <code class="language-plaintext highlighter-rouge">_posts/</code> following the date-slug convention:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_posts/2026-03-01-my-post-title.md
</code></pre></div></div>

<h3 id="front-matter-reference">Front matter reference</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>                        <span class="c1"># Required</span>

<span class="c1"># Content</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Post</span><span class="nv"> </span><span class="s">title"</span>                 <span class="c1"># Required</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2026-03-01</span>                    <span class="c1"># Required ‚Äî matches filename date</span>
<span class="na">excerpt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">One</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">two</span><span class="nv"> </span><span class="s">sentences."</span>    <span class="c1"># Optional ‚Äî used in cards and meta description</span>

<span class="c1"># Taxonomy</span>
<span class="na">categories</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Energy</span><span class="pi">]</span>                <span class="c1"># Optional ‚Äî one category recommended; used for /topic/ archive</span>
<span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">solar</span><span class="pi">,</span> <span class="nv">policy</span><span class="pi">,</span> <span class="nv">net-zero</span><span class="pi">]</span>     <span class="c1"># Optional ‚Äî multiple tags; used for /tag/ archive</span>

<span class="c1"># Authorship</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">paul-hobson</span>                 <span class="c1"># Optional ‚Äî slug from _data/authors.yml; falls back to site.author</span>

<span class="c1"># Images</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">/assets/images/feature.jpg</span>   <span class="c1"># Optional ‚Äî feature image at top of post</span>
<span class="na">image_alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Panel</span><span class="nv"> </span><span class="s">arrays</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">dusk"</span>   <span class="c1"># Optional ‚Äî alt text for accessibility</span>
<span class="na">image_caption</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Photo:</span><span class="nv"> </span><span class="s">Jane</span><span class="nv"> </span><span class="s">Doe"</span>    <span class="c1"># Optional ‚Äî caption below image</span>

<span class="c1"># Display options</span>
<span class="na">featured</span><span class="pi">:</span> <span class="kc">true</span>                      <span class="c1"># Optional ‚Äî shows in Featured section on home page</span>
<span class="na">updated</span><span class="pi">:</span> <span class="s">2026-03-15</span>                 <span class="c1"># Optional ‚Äî shows "Updated" date in post header</span>

<span class="c1"># Series (see ¬ß11)</span>
<span class="na">series</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Series</span><span class="nv"> </span><span class="s">Name"</span>               <span class="c1"># Optional ‚Äî must match exactly across posts</span>
<span class="na">series_order</span><span class="pi">:</span> <span class="m">1</span>                     <span class="c1"># Optional ‚Äî integer, ascending</span>

<span class="c1"># Features</span>
<span class="na">comments</span><span class="pi">:</span> <span class="kc">true</span>                      <span class="c1"># Optional ‚Äî enables Giscus comments widget</span>

<span class="c1"># Viz library flags (see ¬ß6)</span>
<span class="c1"># These add body classes that trigger CDN loading.</span>
<span class="c1"># All are auto-detected from content too ‚Äî flags just guarantee loading.</span>
<span class="na">math</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">diagram</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">viz</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">d3</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">leaflet</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">geo</span><span class="pi">:</span> <span class="kc">true</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="post-content">Post content</h3>

<p>Posts are written in standard Markdown (Kramdown). Use any standard Markdown elements:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Heading (auto-linked anchor)</span>

Regular paragraph. <span class="gs">**Bold.**</span> _Italic._ <span class="sb">`Inline code`</span>.
<span class="gt">
&gt; Blockquote text.</span>
<span class="p">
-</span> Unordered list
<span class="p">-</span> Item two
<span class="p">
1.</span> Ordered list
<span class="p">2.</span> Item two

<span class="p">[</span><span class="nv">Link text</span><span class="p">](</span><span class="sx">https://example.com</span><span class="p">)</span>

<span class="p">![</span><span class="nv">Alt text</span><span class="p">](</span><span class="sx">/assets/images/figure.jpg</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="code-blocks">Code blocks</h3>

<p>Language-tagged code blocks get syntax highlighting (Rouge) and a copy button automatically:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">python
</span><span class="k">def</span> <span class="nf">ricker</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">r</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span>
<span class="p">```</span>
</code></pre></div></div>

<h3 id="post-footer">Post footer</h3>

<p>Every post automatically gets:</p>
<ul>
  <li>Tags as clickable chips</li>
  <li>Share buttons (X/Twitter, LinkedIn, copy link)</li>
  <li>Subscribe CTA</li>
  <li>Giscus comments (if <code class="language-plaintext highlighter-rouge">comments: true</code>)</li>
  <li>Related posts (if tag/category matches exist)</li>
  <li>Previous / next post navigation</li>
</ul>

<hr />

<h2 id="5-computational-essays">5. Computational essays</h2>

<p>Essays use a three-column layout: sticky table of contents (left), content (centre), sidenotes (right). The layout collapses responsively to two columns on tablets and one column on mobile.</p>

<h3 id="front-matter">Front matter</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">essay</span>       <span class="c1"># Required ‚Äî enables 3-column layout, TOC, sidenotes, progress bar</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Essay</span><span class="nv"> </span><span class="s">title"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2026-03-01</span>
<span class="na">excerpt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Summary."</span>
<span class="na">categories</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Mathematics</span><span class="pi">]</span>
<span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">ecology</span><span class="pi">,</span> <span class="nv">population-dynamics</span><span class="pi">]</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">/assets/images/essay-hero.jpg</span>
<span class="na">image_alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Description"</span>
<span class="na">image_caption</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Caption"</span>
<span class="na">series</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Series</span><span class="nv"> </span><span class="s">Name"</span>
<span class="na">series_order</span><span class="pi">:</span> <span class="m">2</span>
<span class="na">comments</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">updated</span><span class="pi">:</span> <span class="s">2026-03-15</span>

<span class="c1"># Viz flags ‚Äî set all that apply</span>
<span class="na">math</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">viz</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">story</span><span class="pi">:</span> <span class="kc">true</span>         <span class="c1"># Loads Scrollama for scrollytelling sections</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="table-of-contents">Table of contents</h3>

<p>Built automatically from all <code class="language-plaintext highlighter-rouge">## h2</code> and <code class="language-plaintext highlighter-rouge">### h3</code> headings in the content. No markup required.</p>

<p>To exclude a heading from the TOC:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h2</span> <span class="na">data-notoc</span><span class="nt">&gt;</span>This heading is excluded<span class="nt">&lt;/h2&gt;</span>
</code></pre></div></div>

<h3 id="sidenotes">Sidenotes</h3>

<p>Tufte-style margin notes. On desktop they appear in the right column; on mobile they appear inline.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  The Ricker model<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"sidenote-anchor"</span> <span class="na">data-sn=</span><span class="s">"1"</span><span class="nt">&gt;&lt;/span&gt;</span> was originally
  developed for salmon population studies.
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"sidenote"</span> <span class="na">data-sn=</span><span class="s">"1"</span><span class="nt">&gt;</span>
  Ricker, W.E. (1954). Stock and Recruitment. <span class="nt">&lt;em&gt;</span>J. Fish. Res. Board Can.<span class="nt">&lt;/em&gt;</span> 11(5):559‚Äì623.
<span class="nt">&lt;/aside&gt;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">data-sn</code> attribute links anchor to note ‚Äî use the same integer for both. Numbers are displayed automatically.</p>

<h3 id="endnotes--references">Endnotes / references</h3>

<p>Inline <code class="language-plaintext highlighter-rouge">&lt;cite&gt;</code> elements are collected and rendered as a numbered reference list at the end of the essay.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  This was described by Lorenz<span class="nt">&lt;cite</span> <span class="na">data-cite=</span><span class="s">"Lorenz, E.N. (1963). Deterministic nonperiodic flow."</span><span class="nt">&gt;&lt;/cite&gt;</span>
  as sensitive dependence on initial conditions.
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>If the <code class="language-plaintext highlighter-rouge">data-cite</code> value starts with <code class="language-plaintext highlighter-rouge">http://</code> or <code class="language-plaintext highlighter-rouge">https://</code>, it renders as a hyperlink.</p>

<h3 id="callouts">Callouts</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout callout-note"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"callout-icon"</span><span class="nt">&gt;</span>üí°<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout-body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Key insight or tip.<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout callout-warning"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"callout-icon"</span><span class="nt">&gt;</span>‚ö†Ô∏è<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout-body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Something to watch out for.<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout callout-definition"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"callout-icon"</span><span class="nt">&gt;</span>üìñ<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout-body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;&lt;strong&gt;</span>Term:<span class="nt">&lt;/strong&gt;</span> Definition text.<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout callout-takeaway"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"callout-icon"</span><span class="nt">&gt;</span>‚úì<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"callout-body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Key takeaway from this section.<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h3 id="scrollytelling">Scrollytelling</h3>

<p>Requires <code class="language-plaintext highlighter-rouge">story: true</code> in front matter.</p>

<p>A story section pins a visualisation in the viewport while narrative steps scroll past. Each step can update the pinned visualisation.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"story-section"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-sticky"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-graphic"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Pinned viz ‚Äî stays visible while steps scroll --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">data-leaflet</span> <span class="na">id=</span><span class="s">"city-map"</span> <span class="na">style=</span><span class="s">"height:100%"</span>
           <span class="na">data-lat=</span><span class="s">"51.505"</span> <span class="na">data-lng=</span><span class="s">"-0.09"</span> <span class="na">data-zoom=</span><span class="s">"10"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-steps"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- Each step triggers an update when it enters the viewport --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-step"</span> <span class="na">data-step=</span><span class="s">"0"</span>
         <span class="na">data-update=</span><span class="s">'{"city-map": {"lat": 51.505, "lng": -0.09, "zoom": 10}}'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p&gt;</span>London. Population 9 million.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-step"</span> <span class="na">data-step=</span><span class="s">"1"</span>
         <span class="na">data-update=</span><span class="s">'{"city-map": {"lat": 48.856, "lng": 2.352, "zoom": 12}}'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p&gt;</span>Paris. Population 11 million.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">data-update</code> JSON maps element IDs to update payloads. Keys are element IDs; values are adapter-specific (see each visualisation type below).</p>

<p>Arrow keys navigate between steps.</p>

<h3 id="reading-progress-bar">Reading progress bar</h3>

<p>Added automatically to essay pages. A 2px accent-coloured bar at the top of the viewport fills as you scroll. Respects <code class="language-plaintext highlighter-rouge">prefers-reduced-motion</code>.</p>

<hr />

<h2 id="6-visualisations">6. Visualisations</h2>

<p>The viz runtime (<code class="language-plaintext highlighter-rouge">assets/js/core.js</code>) scans the page after load, detects which libraries are needed, fetches them from CDN, and mounts each visualisation. Nothing loads on pages that don‚Äôt use it.</p>

<p>Detection is automatic via element selectors (<code class="language-plaintext highlighter-rouge">[data-viz]</code>, <code class="language-plaintext highlighter-rouge">[data-d3]</code>, etc.) or body-class flags set by front matter. Use the front matter flags when you want to guarantee a library loads even if detection would otherwise miss it (e.g. math in a post with no <code class="language-plaintext highlighter-rouge">$</code> signs but with <code class="language-plaintext highlighter-rouge">&lt;span class="math-display"&gt;</code>).</p>

<hr />

<h3 id="mathematics--katex">Mathematics ‚Äî KaTeX</h3>

<p><strong>Front matter flag:</strong> <code class="language-plaintext highlighter-rouge">math: true</code>
<strong>Auto-detection:</strong> <code class="language-plaintext highlighter-rouge">$</code> signs in content, <code class="language-plaintext highlighter-rouge">.math</code>, <code class="language-plaintext highlighter-rouge">.math-inline</code>, <code class="language-plaintext highlighter-rouge">.math-display</code> elements.</p>

<p><strong>Inline:</strong></p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The logistic map is $x_{n+1} = r x_n (1 - x_n)$.
</code></pre></div></div>

<p><strong>Display (centred block):</strong></p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$$
x_{n+1} = r x_n (1 - x_n)
$$
</code></pre></div></div>

<p><strong>LaTeX delimiters also supported:</strong></p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Inline: <span class="se">\(</span> <span class="se">\s</span>igma = <span class="se">\s</span>qrt{<span class="se">\t</span>ext{Var}(X)} <span class="se">\)</span>

Display: <span class="se">\[</span> E[X] = <span class="se">\m</span>u <span class="se">\]</span>
</code></pre></div></div>

<p>Code blocks are excluded from rendering ‚Äî KaTeX never processes content inside <code class="language-plaintext highlighter-rouge">`</code> or <code class="language-plaintext highlighter-rouge">```</code> fences.</p>

<hr />

<h3 id="diagrams--mermaid">Diagrams ‚Äî Mermaid</h3>

<p><strong>Front matter flag:</strong> <code class="language-plaintext highlighter-rouge">diagram: true</code>
<strong>Auto-detection:</strong> <code class="language-plaintext highlighter-rouge">.mermaid</code> elements, <code class="language-plaintext highlighter-rouge">code.language-mermaid</code> blocks.</p>

<p>Use a fenced code block with the <code class="language-plaintext highlighter-rouge">mermaid</code> language tag:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">mermaid
</span><span class="sb">graph TD
    A[Raw data] --&gt; B[Preprocessing]
    B --&gt; C{Valid?}
    C --&gt;|Yes| D[Model]
    C --&gt;|No| E[Reject]
    D --&gt; F[Output]</span>
<span class="p">```</span>
</code></pre></div></div>

<p>Other supported Mermaid diagram types:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">mermaid
</span><span class="sb">sequenceDiagram
    User-&gt;&gt;Server: POST /api/data
    Server--&gt;&gt;User: 200 OK</span>
<span class="p">```</span>
</code></pre></div></div>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">mermaid
</span><span class="sb">gantt
    title Project Timeline
    dateFormat YYYY-MM-DD
    section Research
    Literature review  :a1, 2026-01-01, 30d
    section Writing
    First draft        :after a1, 20d</span>
<span class="p">```</span>
</code></pre></div></div>

<p>The theme is automatically set to Mermaid‚Äôs <code class="language-plaintext highlighter-rouge">dark</code> or <code class="language-plaintext highlighter-rouge">default</code> based on the current colour scheme.</p>

<hr />

<h3 id="charts--echarts">Charts ‚Äî ECharts</h3>

<p><strong>Front matter flag:</strong> <code class="language-plaintext highlighter-rouge">viz: true</code>
<strong>Auto-detection:</strong> <code class="language-plaintext highlighter-rouge">[data-viz]</code> elements.</p>

<p>Pass the full <a href="https://echarts.apache.org/en/option.html">ECharts option object</a> as JSON in <code class="language-plaintext highlighter-rouge">data-options</code>. The <code class="language-plaintext highlighter-rouge">loom</code> theme is pre-registered with accent colours matching the site palette.</p>

<p><strong>Bar chart:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-viz=</span><span class="s">"echarts"</span> <span class="na">style=</span><span class="s">"height:320px"</span> <span class="na">data-options=</span><span class="s">'{
  "tooltip": {"trigger": "axis"},
  "xAxis": {"type": "category", "data": ["Coal", "Gas", "Solar", "Wind"]},
  "yAxis": {"type": "value", "name": "GW"},
  "series": [{"type": "bar", "data": [102, 87, 230, 116]}]
}'</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Line chart:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-viz=</span><span class="s">"echarts"</span> <span class="na">style=</span><span class="s">"height:300px"</span> <span class="na">data-options=</span><span class="s">'{
  "tooltip": {"trigger": "axis"},
  "xAxis": {"type": "category", "data": ["2020", "2021", "2022", "2023", "2024"]},
  "yAxis": {"type": "value"},
  "series": [{"type": "line", "smooth": true, "data": [1.2, 1.8, 2.6, 3.9, 5.1]}]
}'</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Scrolly update:</strong></p>

<p>Give the element an <code class="language-plaintext highlighter-rouge">id</code>, then reference it in each story step‚Äôs <code class="language-plaintext highlighter-rouge">data-update</code>:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-viz=</span><span class="s">"echarts"</span> <span class="na">id=</span><span class="s">"energy-chart"</span> <span class="na">style=</span><span class="s">"height:300px"</span> <span class="na">data-options=</span><span class="s">'{
  "xAxis": {"type": "category", "data": ["Coal", "Gas", "Solar"]},
  "yAxis": {"type": "value"},
  "series": [{"type": "bar", "data": [102, 87, 12]}]
}'</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-step"</span> <span class="na">data-step=</span><span class="s">"1"</span>
     <span class="na">data-update=</span><span class="s">'{"energy-chart": {"series": [{"data": [80, 60, 230]}]}}'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>By 2030, solar overtook both fossil fuels.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">data-update</code> value is passed directly to ECharts <code class="language-plaintext highlighter-rouge">setOption()</code>, so any partial update supported by ECharts works here.</p>

<hr />

<h3 id="charts--d3">Charts ‚Äî D3</h3>

<p><strong>Front matter flag:</strong> <code class="language-plaintext highlighter-rouge">d3: true</code>
<strong>Auto-detection:</strong> <code class="language-plaintext highlighter-rouge">[data-d3]</code> elements.</p>

<p>D3 loads a selective ~120 KB bundle (selection, scale, axis, array, shape, force, drag, transition) via dynamic import ‚Äî only on pages that use it.</p>

<p>Three built-in chart types:</p>

<p><strong>Horizontal bar chart:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-d3=</span><span class="s">"bar"</span> <span class="na">style=</span><span class="s">"height:300px"</span> <span class="na">data-options=</span><span class="s">'{
  "data": [
    {"label": "Solar", "value": 230},
    {"label": "Wind",  "value": 116},
    {"label": "Hydro", "value": 37}
  ]
}'</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>Optional: <code class="language-plaintext highlighter-rouge">"color": "#F0177A"</code> in options overrides bar colour.</p>

<p><strong>Line chart:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-d3=</span><span class="s">"line"</span> <span class="na">style=</span><span class="s">"height:260px"</span> <span class="na">data-options=</span><span class="s">'{
  "data": [
    {"x": 2000, "value": 1.2},
    {"x": 2010, "value": 3.9},
    {"x": 2020, "value": 9.4}
  ]
}'</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Force-directed graph:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-d3=</span><span class="s">"force"</span> <span class="na">style=</span><span class="s">"height:360px"</span> <span class="na">data-options=</span><span class="s">'{
  "data": {
    "nodes": [{"id": "A"}, {"id": "B"}, {"id": "C"}],
    "links": [{"source": "A", "target": "B"}, {"source": "B", "target": "C"}]
  }
}'</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>Nodes are draggable.</p>

<p><strong>Custom chart types:</strong></p>

<p>Register your own factory in an HTML block inside the post:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">registerD3Chart</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">/assets/js/viz/d3.js</span><span class="dl">'</span><span class="p">;</span>

<span class="nf">registerD3Chart</span><span class="p">(</span><span class="dl">'</span><span class="s1">scatter</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">d3</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">d3</span><span class="p">;</span>  <span class="c1">// set after first render on this page</span>

  <span class="kd">const</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nf">append</span><span class="p">(</span><span class="dl">'</span><span class="s1">svg</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">width</span><span class="dl">'</span><span class="p">,</span> <span class="nx">el</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">height</span><span class="dl">'</span><span class="p">,</span> <span class="nx">el</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">);</span>

  <span class="c1">// ‚Ä¶ render scatter plot ‚Ä¶</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nf">update</span><span class="p">(</span><span class="nx">newData</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Re-render with newData when a scrolly step fires</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;div</span> <span class="na">data-d3=</span><span class="s">"scatter"</span> <span class="na">style=</span><span class="s">"height:300px"</span>
     <span class="na">data-options=</span><span class="s">'{"data": [{"x": 1, "y": 2}, {"x": 3, "y": 1}]}'</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Scrolly update:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-d3=</span><span class="s">"bar"</span> <span class="na">id=</span><span class="s">"pop-chart"</span> <span class="na">style=</span><span class="s">"height:280px"</span> <span class="na">data-options=</span><span class="s">'{
  "data": [{"label": "1970", "value": 3.7}]
}'</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-step"</span> <span class="na">data-step=</span><span class="s">"1"</span>
     <span class="na">data-update=</span><span class="s">'{"pop-chart": {"data": [
       {"label": "1970", "value": 3.7},
       {"label": "2024", "value": 8.1}
     ]}}'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>Population doubled in fifty years.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<hr />

<h3 id="ricker-population-model">Ricker population model</h3>

<p>An interactive widget with sliders for growth rate <code class="language-plaintext highlighter-rouge">r</code>, initial value <code class="language-plaintext highlighter-rouge">x‚ÇÄ</code>, and iterations <code class="language-plaintext highlighter-rouge">n</code>. Includes a time-series chart and a phase plot.</p>

<p><strong>Requires:</strong> <code class="language-plaintext highlighter-rouge">viz: true</code> in front matter (needs ECharts).</p>

<p><strong>Static widget with sliders:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-viz=</span><span class="s">"ricker"</span> <span class="na">style=</span><span class="s">"height:360px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Scrollytelling variant (no sliders, updates from story steps):</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-viz=</span><span class="s">"ricker-scrolly"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<hr />

<h3 id="maps--leaflet-no-api-key-required">Maps ‚Äî Leaflet (no API key required)</h3>

<p><strong>Front matter flag:</strong> <code class="language-plaintext highlighter-rouge">leaflet: true</code>
<strong>Auto-detection:</strong> <code class="language-plaintext highlighter-rouge">[data-leaflet]</code> elements.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-leaflet</span> <span class="na">style=</span><span class="s">"height:400px"</span>
     <span class="na">data-lat=</span><span class="s">"51.505"</span>
     <span class="na">data-lng=</span><span class="s">"-0.09"</span>
     <span class="na">data-zoom=</span><span class="s">"13"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Tile presets</strong> (<code class="language-plaintext highlighter-rouge">data-tiles</code> attribute):</p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Tiles</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">osm</code> (default)</td>
      <td>OpenStreetMap</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">carto</code></td>
      <td>CartoDB Positron (light, minimal)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">carto-dark</code></td>
      <td>CartoDB Dark Matter</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">stadia</code></td>
      <td>Stadia Alidade Smooth</td>
    </tr>
  </tbody>
</table>

<p>Dark mode automatically swaps the tile layer to <code class="language-plaintext highlighter-rouge">carto-dark</code>.</p>

<p><strong>Markers:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-leaflet</span> <span class="na">style=</span><span class="s">"height:400px"</span>
     <span class="na">data-lat=</span><span class="s">"51.505"</span> <span class="na">data-lng=</span><span class="s">"-0.09"</span> <span class="na">data-zoom=</span><span class="s">"12"</span>
     <span class="na">data-tiles=</span><span class="s">"carto"</span>
     <span class="na">data-markers=</span><span class="s">'[
       {"lat": 51.505, "lng": -0.09, "label": "London"},
       {"lat": 51.524, "lng": -0.13, "label": "King&amp;apos;s Cross"}
     ]'</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Scrolly update</strong> (fly to new position):</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-leaflet</span> <span class="na">id=</span><span class="s">"city-map"</span> <span class="na">style=</span><span class="s">"height:100%"</span>
     <span class="na">data-lat=</span><span class="s">"51.505"</span> <span class="na">data-lng=</span><span class="s">"-0.09"</span> <span class="na">data-zoom=</span><span class="s">"10"</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-step"</span> <span class="na">data-step=</span><span class="s">"0"</span>
     <span class="na">data-update=</span><span class="s">'{"city-map": {"lat": 51.505, "lng": -0.09, "zoom": 10}}'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>Greater London.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"story-step"</span> <span class="na">data-step=</span><span class="s">"1"</span>
     <span class="na">data-update=</span><span class="s">'{"city-map": {"lat": 48.856, "lng": 2.352, "zoom": 12, "animate": true}}'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>Paris.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">animate: true</code> (default) smoothly flies to the new position. Set <code class="language-plaintext highlighter-rouge">false</code> for an instant jump.</p>

<hr />

<h3 id="maps--mapbox-gl-requires-api-token">Maps ‚Äî Mapbox GL (requires API token)</h3>

<p><strong>Front matter flag:</strong> <code class="language-plaintext highlighter-rouge">geo: true</code>
<strong>Auto-detection:</strong> <code class="language-plaintext highlighter-rouge">[data-map]</code> elements.</p>

<p><strong>Token setup</strong> ‚Äî add your public token to <code class="language-plaintext highlighter-rouge">_config.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mapbox_token</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pk.eyJ..."</span>
</code></pre></div></div>

<p>This is injected as <code class="language-plaintext highlighter-rouge">window.MAPBOX_TOKEN</code> automatically by <code class="language-plaintext highlighter-rouge">_includes/head.html</code> on every page. For a token you don‚Äôt want in source control, use a GitHub Actions secret instead (see ¬ß17).</p>

<p>Or pass per-element to override the global token:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-map=</span><span class="s">"calgary"</span> <span class="na">data-token=</span><span class="s">"pk.eyJ..."</span> <span class="na">style=</span><span class="s">"height:500px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Preset locations:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-map=</span><span class="s">"calgary"</span>   <span class="na">style=</span><span class="s">"height:400px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-map=</span><span class="s">"edmonton"</span>  <span class="na">style=</span><span class="s">"height:400px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-map=</span><span class="s">"vancouver"</span> <span class="na">style=</span><span class="s">"height:400px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-map=</span><span class="s">"toronto"</span>   <span class="na">style=</span><span class="s">"height:400px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-map=</span><span class="s">"world"</span>     <span class="na">style=</span><span class="s">"height:400px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><strong>Custom centre and zoom:</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-map=</span><span class="s">"custom"</span> <span class="na">style=</span><span class="s">"height:400px;"</span>
     <span class="na">data-center=</span><span class="s">"-113.5,51.0"</span>
     <span class="na">data-zoom=</span><span class="s">"10"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">data-center</code> is <code class="language-plaintext highlighter-rouge">longitude,latitude</code> (note order ‚Äî Mapbox convention).</p>

<p>For token-free interactive maps, prefer Leaflet above.</p>

<hr />

<h2 id="7-search">7. Search</h2>

<p>Search is powered by <a href="https://pagefind.app">Pagefind</a>, which indexes the built <code class="language-plaintext highlighter-rouge">_site/</code> directory at CI time and ships the index as static files alongside the site. No server is required.</p>

<h3 id="how-it-works">How it works</h3>

<ol>
  <li>Jekyll builds the site to <code class="language-plaintext highlighter-rouge">_site/</code></li>
  <li><code class="language-plaintext highlighter-rouge">npx pagefind --site _site</code> crawls the HTML and writes <code class="language-plaintext highlighter-rouge">_site/pagefind/</code></li>
  <li>The deploy artifact includes the Pagefind index</li>
  <li>At runtime, the search component dynamically imports <code class="language-plaintext highlighter-rouge">/pagefind/pagefind.js</code> on first open</li>
  <li>Searches run entirely client-side against the local index</li>
</ol>

<h3 id="ui">UI</h3>

<ul>
  <li><strong>Search button</strong> in the header (magnifying glass icon)</li>
  <li><strong>Keyboard shortcut:</strong> <code class="language-plaintext highlighter-rouge">‚åòK</code> (Mac) or <code class="language-plaintext highlighter-rouge">Ctrl+K</code> (Windows / Linux)</li>
  <li><strong>Close:</strong> <code class="language-plaintext highlighter-rouge">ESC</code> key or click outside the panel</li>
  <li>Results show title + highlighted excerpt</li>
  <li>Matched terms are highlighted in pink (the accent colour)</li>
</ul>

<h3 id="using-search-locally">Using search locally</h3>

<p>After a full <code class="language-plaintext highlighter-rouge">jekyll build</code>, run Pagefind and then serve the already-built site:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run build
bundle <span class="nb">exec </span>jekyll build
npx pagefind <span class="nt">--site</span> _site
bundle <span class="nb">exec </span>jekyll serve <span class="nt">--skip-initial-build</span>
</code></pre></div></div>

<p>Browse to <code class="language-plaintext highlighter-rouge">http://localhost:4000</code> and search will work.</p>

<blockquote>
  <p>Running <code class="language-plaintext highlighter-rouge">jekyll serve</code> (without <code class="language-plaintext highlighter-rouge">--skip-initial-build</code>) overwrites <code class="language-plaintext highlighter-rouge">_site/</code> and removes the Pagefind index. Always build first, then serve.</p>
</blockquote>

<h3 id="excluding-content-from-the-index">Excluding content from the index</h3>

<p>Pagefind indexes all HTML by default. To exclude a section:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-pagefind-ignore</span><span class="nt">&gt;</span>
  This content will not appear in search results.
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>To exclude an entire page, add to its front matter:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">exclude_from_search</span><span class="pi">:</span> <span class="kc">true</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>Then add a hook in <code class="language-plaintext highlighter-rouge">_plugins/</code> or a Pagefind config file ‚Äî see <a href="https://pagefind.app/docs/config-options/">Pagefind docs</a>.</p>

<h3 id="ci-integration">CI integration</h3>

<p>The <code class="language-plaintext highlighter-rouge">npx pagefind --site _site</code> step in <code class="language-plaintext highlighter-rouge">.github/workflows/deploy.yml</code> runs automatically after <code class="language-plaintext highlighter-rouge">jekyll build</code>. No additional configuration is needed for deployment.</p>

<hr />

<h2 id="8-navigation">8. Navigation</h2>

<h3 id="header">Header</h3>

<p>Defined in <code class="language-plaintext highlighter-rouge">_config.yml</code> under <code class="language-plaintext highlighter-rouge">navigation:</code>. Active state is applied automatically when <code class="language-plaintext highlighter-rouge">page.url</code> matches the item URL.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">navigation</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">Home</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">Topics</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/topics/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">Archive</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/archive/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">About</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/about/</span>
</code></pre></div></div>

<h3 id="footer--secondary-links">Footer ‚Äî secondary links</h3>

<p>Defined in <code class="language-plaintext highlighter-rouge">_config.yml</code> under <code class="language-plaintext highlighter-rouge">secondary_navigation:</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">secondary_navigation</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">About</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/about/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">Privacy</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/privacy/</span>
  <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">RSS</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">/feed.xml</span>
</code></pre></div></div>

<p>The footer Topics column is populated automatically from the six most-used categories.</p>

<h3 id="mobile-navigation">Mobile navigation</h3>

<p>The header collapses to a hamburger on small screens. The drawer opens/closes with the hamburger button and also closes on <code class="language-plaintext highlighter-rouge">ESC</code> or clicking outside.</p>

<hr />

<h2 id="9-comments">9. Comments</h2>

<p>Comments use <a href="https://giscus.app">Giscus</a>, backed by GitHub Discussions. Comments are stored in your repo‚Äôs Discussions tab ‚Äî no third-party database.</p>

<h3 id="setup">Setup</h3>

<ol>
  <li>Enable <strong>Discussions</strong> on your GitHub repo (Settings ‚Üí General ‚Üí Features ‚Üí Discussions).</li>
  <li>Install the <a href="https://github.com/apps/giscus">Giscus app</a> and grant it access to your repo.</li>
  <li>Go to <a href="https://giscus.app">giscus.app</a>, enter your repo, select a discussion category, and copy the generated values.</li>
</ol>

<h3 id="configuration">Configuration</h3>

<p>Add the values to <code class="language-plaintext highlighter-rouge">_config.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">giscus</span><span class="pi">:</span>
  <span class="na">repo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pauldhobson/loomcollective"</span>    <span class="c1"># owner/repo</span>
  <span class="na">repo_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">R_kgDOJ5..."</span>                <span class="c1"># from giscus.app</span>
  <span class="na">category</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Announcements"</span>
  <span class="na">category_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">DIC_kwDOJ5..."</span>          <span class="c1"># from giscus.app</span>
</code></pre></div></div>

<h3 id="enabling-per-post">Enabling per post</h3>

<p>Add <code class="language-plaintext highlighter-rouge">comments: true</code> to any post or essay front matter:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Post"</span>
<span class="na">comments</span><span class="pi">:</span> <span class="kc">true</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>Comments will not appear on posts without <code class="language-plaintext highlighter-rouge">comments: true</code>, even if Giscus is configured.</p>

<h3 id="dark-mode">Dark mode</h3>

<p>The Giscus widget automatically follows the site‚Äôs colour scheme. When you toggle dark mode, a <code class="language-plaintext highlighter-rouge">postMessage</code> is sent to the Giscus iframe to update its theme in real time.</p>

<hr />

<h2 id="10-analytics">10. Analytics</h2>

<p>The theme is wired for Cloudflare Web Analytics, which is privacy-respecting and free on Cloudflare‚Äôs free plan.</p>

<h3 id="setup-1">Setup</h3>

<ol>
  <li>Create a <a href="https://dash.cloudflare.com">Cloudflare account</a> if you don‚Äôt have one.</li>
  <li>Go to <strong>Websites</strong> ‚Üí add your domain (or use Cloudflare Pages hosting).</li>
  <li>Go to <strong>Analytics &amp; Logs ‚Üí Web Analytics</strong> ‚Üí add your site.</li>
  <li>Copy the analytics token (a long hex string).</li>
</ol>

<h3 id="configuration-1">Configuration</h3>

<p>Paste the token into <code class="language-plaintext highlighter-rouge">_config.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">analytics_token</span><span class="pi">:</span> <span class="s2">"</span><span class="s">abc123def456..."</span>
</code></pre></div></div>

<p>The script tag is only injected when the token is non-empty, so leaving it blank disables analytics entirely for local development.</p>

<hr />

<h2 id="11-series">11. Series</h2>

<p>The series system groups related posts with a numbered navigation box that appears at the top of each post in the series.</p>

<h3 id="setup-2">Setup</h3>

<p>Add <code class="language-plaintext highlighter-rouge">series</code> and <code class="language-plaintext highlighter-rouge">series_order</code> to each post‚Äôs front matter. The series name must match exactly across all posts (case-sensitive):</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Post 1</span>
<span class="nn">---</span>
<span class="na">series</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Building</span><span class="nv"> </span><span class="s">Loom"</span>
<span class="na">series_order</span><span class="pi">:</span> <span class="m">1</span>
<span class="nn">---</span>

<span class="c1"># Post 2</span>
<span class="nn">---</span>
<span class="na">series</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Building</span><span class="nv"> </span><span class="s">Loom"</span>
<span class="na">series_order</span><span class="pi">:</span> <span class="m">2</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>The navigation box appears automatically when at least two posts share the same <code class="language-plaintext highlighter-rouge">series</code> value. The current post is highlighted with a pink number; other posts are links.</p>

<h3 id="notes">Notes</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">series_order</code> must be an integer.</li>
  <li>Posts do not need to be numbered consecutively ‚Äî gaps are fine.</li>
  <li>A post can only belong to one series.</li>
</ul>

<hr />

<h2 id="12-related-posts-and-subscribe-cta">12. Related posts and subscribe CTA</h2>

<p>Both are included automatically on every post and essay page.</p>

<h3 id="related-posts">Related posts</h3>

<p>Shows up to three posts below the content. Scoring algorithm:</p>

<ul>
  <li>+1 point for each matching tag</li>
  <li>+1 point if the post shares the same primary category</li>
</ul>

<p>Posts with the highest score appear first. If no related posts exist (score = 0 for all), the section is hidden.</p>

<p>To improve related post quality: use consistent, specific tags. A post tagged <code class="language-plaintext highlighter-rouge">[solar, policy, net-zero]</code> will relate well to other posts with any of those tags.</p>

<h3 id="subscribe-cta">Subscribe CTA</h3>

<p>A horizontal bar with a short description and an RSS link. The description is hardcoded in <code class="language-plaintext highlighter-rouge">_includes/subscribe-cta.html</code> ‚Äî edit that file to change the copy.</p>

<hr />

<h2 id="13-rss-and-sitemap">13. RSS and sitemap</h2>

<p>Both are generated automatically by Jekyll plugins ‚Äî no configuration required beyond having the plugins in <code class="language-plaintext highlighter-rouge">Gemfile</code> (they are already there).</p>

<table>
  <thead>
    <tr>
      <th>Output</th>
      <th>URL</th>
      <th>Plugin</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Atom feed</td>
      <td><code class="language-plaintext highlighter-rouge">/feed.xml</code></td>
      <td><code class="language-plaintext highlighter-rouge">jekyll-feed</code></td>
    </tr>
    <tr>
      <td>XML sitemap</td>
      <td><code class="language-plaintext highlighter-rouge">/sitemap.xml</code></td>
      <td><code class="language-plaintext highlighter-rouge">jekyll-sitemap</code></td>
    </tr>
  </tbody>
</table>

<p>The sitemap includes all posts, pages, and archive pages. The feed includes the 10 most recent posts with full content.</p>

<hr />

<h2 id="14-dark-mode">14. Dark mode</h2>

<h3 id="how-it-works-1">How it works</h3>

<p>Dark mode is stored in <code class="language-plaintext highlighter-rouge">localStorage</code> under the key <code class="language-plaintext highlighter-rouge">loom-dark</code> (<code class="language-plaintext highlighter-rouge">'1'</code> = dark, <code class="language-plaintext highlighter-rouge">'0'</code> = light). On first visit with no saved preference, the browser‚Äôs system preference (<code class="language-plaintext highlighter-rouge">prefers-color-scheme</code>) is used.</p>

<p>An inline <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> in <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> applies the <code class="language-plaintext highlighter-rouge">data-theme</code> attribute to <code class="language-plaintext highlighter-rouge">&lt;html&gt;</code> synchronously before first paint, preventing a flash of wrong colour scheme.</p>

<h3 id="css-theming">CSS theming</h3>

<p>All colours are CSS custom properties in <code class="language-plaintext highlighter-rouge">src/main.css</code>. Dark variants are scoped to <code class="language-plaintext highlighter-rouge">[data-theme="dark"]</code>:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:root</span> <span class="p">{</span>
  <span class="py">--text</span><span class="p">:</span>    <span class="nx">#111110</span><span class="p">;</span>
  <span class="py">--bg</span><span class="p">:</span>      <span class="nx">#FAFAF8</span><span class="p">;</span>
  <span class="py">--accent</span><span class="p">:</span>  <span class="nx">#F0177A</span><span class="p">;</span>
  <span class="py">--border</span><span class="p">:</span>  <span class="nx">#E4E2DF</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">[</span><span class="nt">data-theme</span><span class="o">=</span><span class="s1">"dark"</span><span class="o">]</span> <span class="p">{</span>
  <span class="py">--text</span><span class="p">:</span>    <span class="nx">#ECEBE8</span><span class="p">;</span>
  <span class="py">--bg</span><span class="p">:</span>      <span class="nx">#141413</span><span class="p">;</span>
  <span class="py">--border</span><span class="p">:</span>  <span class="nx">#2A2A28</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Tailwind‚Äôs dark mode variant also uses this selector: <code class="language-plaintext highlighter-rouge">darkMode: ['selector', '[data-theme="dark"]']</code> in <code class="language-plaintext highlighter-rouge">tailwind.config.js</code>.</p>

<h3 id="components-that-sync-with-dark-mode">Components that sync with dark mode</h3>

<table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Mechanism</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Syntax highlighting</td>
      <td>CSS <code class="language-plaintext highlighter-rouge">[data-theme="dark"]</code> selectors in <code class="language-plaintext highlighter-rouge">syntax.css</code></td>
    </tr>
    <tr>
      <td>Mermaid diagrams</td>
      <td>Re-initialised with <code class="language-plaintext highlighter-rouge">theme: 'dark'</code> on toggle</td>
    </tr>
    <tr>
      <td>Leaflet tiles</td>
      <td><code class="language-plaintext highlighter-rouge">MutationObserver</code> on <code class="language-plaintext highlighter-rouge">data-theme</code> swaps to <code class="language-plaintext highlighter-rouge">carto-dark</code> tiles</td>
    </tr>
    <tr>
      <td>Giscus comments</td>
      <td><code class="language-plaintext highlighter-rouge">postMessage</code> API sends <code class="language-plaintext highlighter-rouge">setConfig</code> to iframe</td>
    </tr>
    <tr>
      <td>Search panel</td>
      <td>CSS custom properties ‚Äî inherits automatically</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="15-images">15. Images</h2>

<h3 id="feature-images">Feature images</h3>

<p>Set in front matter:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">image</span><span class="pi">:</span> <span class="s">/assets/images/my-post.jpg</span>
<span class="na">image_alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Descriptive</span><span class="nv"> </span><span class="s">alt</span><span class="nv"> </span><span class="s">text</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">screen</span><span class="nv"> </span><span class="s">readers"</span>
<span class="na">image_caption</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Photo:</span><span class="nv"> </span><span class="s">Photographer</span><span class="nv"> </span><span class="s">Name,</span><span class="nv"> </span><span class="s">CC</span><span class="nv"> </span><span class="s">BY</span><span class="nv"> </span><span class="s">4.0"</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">image</code> ‚Äî path to the image. Use absolute paths (<code class="language-plaintext highlighter-rouge">/assets/images/...</code>) to avoid path issues.</li>
  <li><code class="language-plaintext highlighter-rouge">image_alt</code> ‚Äî <strong>always provide this.</strong> Screen readers and search engines use it.</li>
  <li><code class="language-plaintext highlighter-rouge">image_caption</code> ‚Äî optional; rendered as <code class="language-plaintext highlighter-rouge">&lt;figcaption&gt;</code> below the image.</li>
</ul>

<h3 id="sizing-and-loading">Sizing and loading</h3>

<table>
  <thead>
    <tr>
      <th>Context</th>
      <th>Recommended size</th>
      <th>Loading</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Post feature image</td>
      <td>1400 √ó 600 px</td>
      <td><code class="language-plaintext highlighter-rouge">eager</code></td>
    </tr>
    <tr>
      <td>Essay hero image</td>
      <td>1200 √ó 400 px</td>
      <td><code class="language-plaintext highlighter-rouge">eager</code></td>
    </tr>
    <tr>
      <td>Post card</td>
      <td>600 √ó 338 px (16:9)</td>
      <td><code class="language-plaintext highlighter-rouge">lazy</code></td>
    </tr>
  </tbody>
</table>

<h3 id="content-images">Content images</h3>

<p>Images in Markdown:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">![</span><span class="nv">Alt text for this image</span><span class="p">](</span><span class="sx">/assets/images/figure.jpg</span><span class="p">)</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">_plugins/lazy_images.rb</code> plugin automatically adds <code class="language-plaintext highlighter-rouge">loading="lazy"</code> to all <code class="language-plaintext highlighter-rouge">&lt;img&gt;</code> tags in the rendered HTML that don‚Äôt already have a <code class="language-plaintext highlighter-rouge">loading</code> attribute. You don‚Äôt need to add it manually.</p>

<h3 id="og--social-sharing-image">OG / social sharing image</h3>

<p>A default OG image applies to all posts via <code class="language-plaintext highlighter-rouge">_config.yml</code> defaults:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">defaults</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">_posts"</span>
    <span class="na">values</span><span class="pi">:</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">/assets/images/og-default.png</span>
</code></pre></div></div>

<p>Override per-post by setting <code class="language-plaintext highlighter-rouge">image:</code> in front matter. The <code class="language-plaintext highlighter-rouge">jekyll-seo-tag</code> plugin reads <code class="language-plaintext highlighter-rouge">page.image</code> and populates <code class="language-plaintext highlighter-rouge">og:image</code> automatically.</p>

<hr />

<h2 id="16-custom-domain">16. Custom domain</h2>

<h3 id="files">Files</h3>

<p><strong><code class="language-plaintext highlighter-rouge">CNAME</code></strong> (repo root) ‚Äî contains your domain:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>loomcollective.ai
</code></pre></div></div>

<p><strong><code class="language-plaintext highlighter-rouge">_config.yml</code>:</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://loomcollective.ai"</span>
<span class="na">baseurl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">baseurl</code> must be empty (<code class="language-plaintext highlighter-rouge">""</code>) when deploying to an apex domain or subdomain that maps to the repo root. Set it to <code class="language-plaintext highlighter-rouge">"/path"</code> only if the site lives at <code class="language-plaintext highlighter-rouge">https://example.com/path/</code>.</p>

<h3 id="dns">DNS</h3>

<p>Add a CNAME record at your DNS provider pointing your domain to GitHub Pages:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>loomcollective.ai  CNAME  pauldhobson.github.io
</code></pre></div></div>

<p>For apex domains (no <code class="language-plaintext highlighter-rouge">www</code>), use ALIAS or ANAME records (or Cloudflare‚Äôs CNAME flattening). GitHub‚Äôs <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site">custom domain documentation</a> covers all cases.</p>

<p>GitHub Pages enforces HTTPS automatically via Let‚Äôs Encrypt once DNS propagates.</p>

<hr />

<h2 id="17-github-actions-deployment">17. GitHub Actions deployment</h2>

<p>Deployment is fully automated via <code class="language-plaintext highlighter-rouge">.github/workflows/deploy.yml</code>. Every push to <code class="language-plaintext highlighter-rouge">main</code> triggers a build and deploy.</p>

<h3 id="build-pipeline">Build pipeline</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>push to main
  ‚îî‚îÄ‚îÄ install Node 20 deps (npm ci)
  ‚îî‚îÄ‚îÄ build CSS/JS (npm run build ‚Üí assets/built/)
  ‚îî‚îÄ‚îÄ install Ruby 3.3 gems (bundler-cache: true)
  ‚îî‚îÄ‚îÄ build Jekyll site (bundle exec jekyll build ‚Üí _site/)
  ‚îî‚îÄ‚îÄ index with Pagefind (npx pagefind --site _site ‚Üí _site/pagefind/)
  ‚îî‚îÄ‚îÄ upload _site/ as GitHub Pages artifact
  ‚îî‚îÄ‚îÄ deploy artifact to GitHub Pages
</code></pre></div></div>

<h3 id="enabling-github-pages">Enabling GitHub Pages</h3>

<ol>
  <li>Go to your repo <strong>Settings ‚Üí Pages</strong>.</li>
  <li>Source: <strong>GitHub Actions</strong>.</li>
  <li>The workflow handles the rest.</li>
</ol>

<h3 id="environment-and-secrets">Environment and secrets</h3>

<p>No secrets are needed for basic deployment. The workflow uses OIDC-based GitHub Pages deployment (no personal access token required).</p>

<p>If you add features that require secrets (e.g., a Mapbox token you don‚Äôt want in source), add them via <strong>Settings ‚Üí Secrets and variables ‚Üí Actions</strong>, then reference in the workflow:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build Jekyll site</span>
  <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec jekyll build</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">JEKYLL_ENV</span><span class="pi">:</span> <span class="s">production</span>
    <span class="na">MAPBOX_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
</code></pre></div></div>

<p>And inject into the page via a Jekyll variable in <code class="language-plaintext highlighter-rouge">_includes/head.html</code>.</p>

<h3 id="caching">Caching</h3>

<p>npm and Bundler caches are both enabled ‚Äî <code class="language-plaintext highlighter-rouge">cache: "npm"</code> on the Node setup step and <code class="language-plaintext highlighter-rouge">bundler-cache: true</code> on the Ruby setup step. A typical build after the first run takes about 60‚Äì90 seconds.</p>

<hr />

<h2 id="18-video-embeds">18. Video embeds</h2>

<p>Two includes handle video content: <code class="language-plaintext highlighter-rouge">video.html</code> for self-hosted files and <code class="language-plaintext highlighter-rouge">embed.html</code> for YouTube/Vimeo.</p>

<h3 id="native-html5-video--_includesvideohtml">Native HTML5 video ‚Äî <code class="language-plaintext highlighter-rouge">_includes/video.html</code></h3>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;figure class="video-figure"&gt;
  &lt;div class="video-wrap"&gt;
    &lt;video
      controls
      playsinline
      preload="metadata"
      
      
      
    &gt;
      &lt;source src="/assets/video/demo.mp4" type="video/mp4"&gt;
      &lt;p&gt;Your browser does not support HTML video.
        &lt;a href="/assets/video/demo.mp4"&gt;Download the video&lt;/a&gt;.
      &lt;/p&gt;
    &lt;/video&gt;
  &lt;/div&gt;
  
  &lt;figcaption class="video-caption"&gt;Optional caption&lt;/figcaption&gt;
  
&lt;/figure&gt;

</code></pre></div></div>

<p><strong>Parameters:</strong></p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">src</code></td>
      <td>Yes</td>
      <td>Path to the video file (passed through <code class="language-plaintext highlighter-rouge">relative_url</code>)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">poster</code></td>
      <td>No</td>
      <td>Path to a poster image shown before playback</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">caption</code></td>
      <td>No</td>
      <td>Caption text displayed below the video</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">type</code></td>
      <td>No</td>
      <td>MIME type ‚Äî defaults to <code class="language-plaintext highlighter-rouge">video/mp4</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">loop</code></td>
      <td>No</td>
      <td>Add <code class="language-plaintext highlighter-rouge">loop</code> to repeat the video continuously</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">autoplay</code></td>
      <td>No</td>
      <td>Add <code class="language-plaintext highlighter-rouge">autoplay</code> to start on load (forces <code class="language-plaintext highlighter-rouge">muted</code>)</td>
    </tr>
  </tbody>
</table>

<p><code class="language-plaintext highlighter-rouge">playsinline</code> is always set (required for iOS inline playback). <code class="language-plaintext highlighter-rouge">preload="metadata"</code> loads only the first frame and duration, avoiding unnecessary bandwidth on page load. When <code class="language-plaintext highlighter-rouge">autoplay</code> is set, <code class="language-plaintext highlighter-rouge">muted</code> is automatically added ‚Äî browsers block audible autoplay.</p>

<h3 id="youtube--vimeo-embed--_includesembedhtml">YouTube / Vimeo embed ‚Äî <code class="language-plaintext highlighter-rouge">_includes/embed.html</code></h3>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code>




&lt;div class="video-embed"&gt;
  &lt;div class="video-embed-wrap"&gt;
    &lt;iframe
      src="https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ"
      title="Video embed"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen
      loading="lazy"
    &gt;&lt;/iframe&gt;
  &lt;/div&gt;
  &lt;p class="video-caption"&gt;Optional caption&lt;/p&gt;
&lt;/div&gt;







&lt;div class="video-embed"&gt;
  &lt;div class="video-embed-wrap"&gt;
    &lt;iframe
      src="https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ"
      title="Video title"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen
      loading="lazy"
    &gt;&lt;/iframe&gt;
  &lt;/div&gt;
  
&lt;/div&gt;







&lt;div class="video-embed"&gt;
  &lt;div class="video-embed-wrap"&gt;
    &lt;iframe
      src="https://player.vimeo.com/video/123456789"
      title="Video embed"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen
      loading="lazy"
    &gt;&lt;/iframe&gt;
  &lt;/div&gt;
  &lt;p class="video-caption"&gt;Vimeo example&lt;/p&gt;
&lt;/div&gt;


</code></pre></div></div>

<p><strong>Supported URL forms:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">https://youtu.be/VIDEO_ID</code></li>
  <li><code class="language-plaintext highlighter-rouge">https://www.youtube.com/watch?v=VIDEO_ID</code> (extra query params are stripped)</li>
  <li><code class="language-plaintext highlighter-rouge">https://vimeo.com/VIDEO_ID</code></li>
</ul>

<p><strong>Parameters:</strong></p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">url</code></td>
      <td>Yes</td>
      <td>Full video URL in any supported form</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">title</code></td>
      <td>No</td>
      <td><code class="language-plaintext highlighter-rouge">title</code> attribute on the iframe (defaults to <code class="language-plaintext highlighter-rouge">Video embed</code>)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">caption</code></td>
      <td>No</td>
      <td>Caption text displayed below the embed</td>
    </tr>
  </tbody>
</table>

<p><strong>Privacy note:</strong> YouTube URLs are rewritten to <code class="language-plaintext highlighter-rouge">youtube-nocookie.com</code>. No cookies are set until the user presses play. Vimeo uses the standard player embed.</p>

<p>Both includes render in a <code class="language-plaintext highlighter-rouge">16:9</code> aspect-ratio wrapper with <code class="language-plaintext highlighter-rouge">border-radius</code> matching the site‚Äôs <code class="language-plaintext highlighter-rouge">--radius</code> token. The CSS lives in <code class="language-plaintext highlighter-rouge">src/main.css</code>.</p>

<hr />

<h2 id="19-presentations">19. Presentations</h2>

<p>The <code class="language-plaintext highlighter-rouge">presentation</code> layout renders a full-screen <a href="https://revealjs.com/">Reveal.js</a> slideshow without the normal site header or footer.</p>

<h3 id="front-matter-1">Front matter</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">presentation</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Presentation</span><span class="nv"> </span><span class="s">Title"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2026-02-28</span>
<span class="na">excerpt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">One-sentence</span><span class="nv"> </span><span class="s">description</span><span class="nv"> </span><span class="s">shown</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">meta</span><span class="nv"> </span><span class="s">tags."</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="slide-syntax">Slide syntax</h3>

<p>Separate slides with <code class="language-plaintext highlighter-rouge">---</code> (a horizontal rule in Markdown, rendered as <code class="language-plaintext highlighter-rouge">&lt;hr&gt;</code> by kramdown). The layout splits the rendered HTML at every <code class="language-plaintext highlighter-rouge">&lt;hr&gt;</code> into individual <code class="language-plaintext highlighter-rouge">&lt;section&gt;</code> elements.</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">presentation</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Talk"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2026-02-28</span>
<span class="nn">---</span>

<span class="gh"># Slide one title</span>
Some content.
<span class="p">
---
</span>
<span class="gu">## Slide two</span>
<span class="p">
-</span> Bullet point
<span class="p">-</span> Another bullet
<span class="p">
---
</span>
<span class="gu">## Code example</span>

<span class="p">```</span><span class="nl">javascript
</span><span class="kd">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### Speaker notes

Add an `&lt;aside class="notes"&gt;` element inside a slide. Notes appear only in the S-key speaker window:

```markdown
## My slide

Content visible to the audience.

&lt;aside class="notes"&gt;
  These notes only appear in the speaker view (press S).
&lt;/aside&gt;
</code></pre></div></div>

<h3 id="keyboard-shortcuts">Keyboard shortcuts</h3>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">‚Üí</code> / <code class="language-plaintext highlighter-rouge">Space</code></td>
      <td>Next slide</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">‚Üê</code></td>
      <td>Previous slide</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">F</code></td>
      <td>Fullscreen</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">S</code></td>
      <td>Open speaker notes window</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">O</code></td>
      <td>Slide overview</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">B</code></td>
      <td>Blackout screen</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Esc</code></td>
      <td>Exit overview / fullscreen</td>
    </tr>
  </tbody>
</table>

<h3 id="dark-mode-1">Dark mode</h3>

<p>The presentation reads <code class="language-plaintext highlighter-rouge">localStorage</code> for the <code class="language-plaintext highlighter-rouge">loom-dark</code> key (the same key used by the rest of the site). If dark mode is active, the Reveal.js <code class="language-plaintext highlighter-rouge">black.css</code> base theme is loaded instead of <code class="language-plaintext highlighter-rouge">white.css</code>. The theme swap happens before <code class="language-plaintext highlighter-rouge">Reveal.initialize()</code> to prevent a flash of the wrong theme.</p>

<h3 id="styling">Styling</h3>

<p>Override CSS lives in <code class="language-plaintext highlighter-rouge">assets/css/presentation.css</code> (a static file, not Vite-built ‚Äî the same pattern as <code class="language-plaintext highlighter-rouge">assets/css/essay.css</code>). It uses Loom‚Äôs fonts (Instrument Serif, DM Sans, JetBrains Mono) and accent colour (<code class="language-plaintext highlighter-rouge">#F0177A</code>). The back-to-site link in the top-left is styled via <code class="language-plaintext highlighter-rouge">.presentation-back</code>.</p>

<hr />

<h2 id="20-photo-galleries">20. Photo galleries</h2>

<p>The <code class="language-plaintext highlighter-rouge">gallery</code> include renders a responsive 3-column photo grid with a click-to-enlarge lightbox powered by Alpine.js. No extra libraries or dependencies.</p>

<h3 id="front-matter-2">Front matter</h3>

<p>Define the image list in the post‚Äôs front matter:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Glacier</span><span class="nv"> </span><span class="s">Field</span><span class="nv"> </span><span class="s">Sites"</span>
<span class="na">gallery</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">/assets/images/posts/findelen-01.jpg</span>
    <span class="na">alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Findelen</span><span class="nv"> </span><span class="s">Glacier</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">lateral</span><span class="nv"> </span><span class="s">moraine"</span>
    <span class="na">caption</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Looking</span><span class="nv"> </span><span class="s">south</span><span class="nv"> </span><span class="s">towards</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Findelen,</span><span class="nv"> </span><span class="s">September</span><span class="nv"> </span><span class="s">2018"</span>
  <span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">/assets/images/posts/gorner-01.jpg</span>
    <span class="na">alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Gorner</span><span class="nv"> </span><span class="s">Glacier</span><span class="nv"> </span><span class="s">confluence"</span>
  <span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">/assets/images/posts/mer-de-glace.jpg</span>
    <span class="na">alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Mer</span><span class="nv"> </span><span class="s">de</span><span class="nv"> </span><span class="s">Glace</span><span class="nv"> </span><span class="s">ablation</span><span class="nv"> </span><span class="s">zone"</span>
    <span class="na">caption</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Annual</span><span class="nv"> </span><span class="s">ice</span><span class="nv"> </span><span class="s">loss</span><span class="nv"> </span><span class="s">markers,</span><span class="nv"> </span><span class="s">July</span><span class="nv"> </span><span class="s">2017"</span>
<span class="nn">---</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">src</code></td>
      <td>Yes</td>
      <td>Image path ‚Äî absolute (<code class="language-plaintext highlighter-rouge">/assets/images/...</code>) recommended</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">alt</code></td>
      <td>Yes</td>
      <td>Alt text for accessibility and screen readers</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">caption</code></td>
      <td>No</td>
      <td>Caption shown below the image in the lightbox</td>
    </tr>
  </tbody>
</table>

<h3 id="usage-in-content">Usage in content</h3>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code>




</code></pre></div></div>

<p>This uses <code class="language-plaintext highlighter-rouge">page.gallery</code> by default. To pass a custom array:</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code>




</code></pre></div></div>

<h3 id="lightbox-controls">Lightbox controls</h3>

<table>
  <thead>
    <tr>
      <th>Action</th>
      <th>Control</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Open</td>
      <td>Click any thumbnail</td>
    </tr>
    <tr>
      <td>Close</td>
      <td><code class="language-plaintext highlighter-rouge">Esc</code>, close button, or click outside the image</td>
    </tr>
    <tr>
      <td>Previous / next</td>
      <td><code class="language-plaintext highlighter-rouge">‚Üê</code> / <code class="language-plaintext highlighter-rouge">‚Üí</code> arrow keys, or the on-screen buttons</td>
    </tr>
  </tbody>
</table>

<p>A <code class="language-plaintext highlighter-rouge">1 / N</code> counter appears at the bottom. Captions are shown only when present.</p>

<h3 id="recommended-image-sizing">Recommended image sizing</h3>

<table>
  <thead>
    <tr>
      <th>Use</th>
      <th>Recommended size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Thumbnail (grid)</td>
      <td>800 √ó 600 px</td>
    </tr>
    <tr>
      <td>Lightbox (full view)</td>
      <td>1600 √ó 1200 px or native</td>
    </tr>
  </tbody>
</table>

<p>The grid cells use a fixed <code class="language-plaintext highlighter-rouge">4:3</code> aspect ratio with <code class="language-plaintext highlighter-rouge">object-fit: cover</code>. The lightbox displays images at their natural size, constrained to the viewport.</p>

<h3 id="organising-gallery-images">Organising gallery images</h3>

<p>Keep gallery images in a post-specific folder:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>assets/images/posts/glaciers-field-sites/findelen-01.jpg
assets/images/posts/glaciers-field-sites/gorner-01.jpg
</code></pre></div></div>

<hr />

<h2 id="21-authors">21. Authors</h2>

<p>Author profiles are stored in <code class="language-plaintext highlighter-rouge">_data/authors.yml</code>, keyed by slug. All display locations (post header, post card, essay hero, author bio card, author profile page) resolve the slug to the full data automatically.</p>

<h3 id="adding-an-author">Adding an author</h3>

<p>Add an entry to <code class="language-plaintext highlighter-rouge">_data/authors.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jane-smith</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">Jane Smith</span>
  <span class="na">bio</span><span class="pi">:</span> <span class="pi">&gt;</span>
    <span class="s">Hydrologist and climate scientist. Research focus on Arctic river discharge</span>
    <span class="s">and permafrost hydrology.</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">/assets/images/authors/jane-smith.jpg</span>   <span class="c1"># optional</span>
  <span class="na">location</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Montr√©al,</span><span class="nv"> </span><span class="s">QC"</span>                        <span class="c1"># optional</span>
  <span class="na">website</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://janesmith.ca"</span>                 <span class="c1"># optional ‚Äî leave "" to hide</span>
  <span class="na">twitter</span><span class="pi">:</span> <span class="s2">"</span><span class="s">janesmith"</span>                            <span class="c1"># optional ‚Äî handle only, no @</span>
  <span class="na">github</span><span class="pi">:</span> <span class="s2">"</span><span class="s">janesmith"</span>                             <span class="c1"># optional</span>
</code></pre></div></div>

<p>Create a profile page at <code class="language-plaintext highlighter-rouge">_pages/authors/jane-smith.md</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">author</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">Jane Smith</span>
<span class="na">author_slug</span><span class="pi">:</span> <span class="s">jane-smith</span>
<span class="na">permalink</span><span class="pi">:</span> <span class="s">/author/jane-smith/</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>The profile page automatically lists all posts with <code class="language-plaintext highlighter-rouge">author: jane-smith</code>.</p>

<h3 id="per-post-author">Per-post author</h3>

<p>Set <code class="language-plaintext highlighter-rouge">author:</code> in post front matter using the slug:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">author</span><span class="pi">:</span> <span class="s">jane-smith</span>
</code></pre></div></div>

<p>Falls back to <code class="language-plaintext highlighter-rouge">site.author</code> (defined in <code class="language-plaintext highlighter-rouge">_config.yml</code>) if not set.</p>

<h3 id="co-authored-posts">Co-authored posts</h3>

<p>Pass an array of slugs:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">author</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">paul-hobson</span><span class="pi">,</span> <span class="nv">jane-smith</span><span class="pi">]</span>
</code></pre></div></div>

<p>Both names render as links in the byline and author card. Both authors‚Äô profile pages will include the post.</p>

<h3 id="author-photo">Author photo</h3>

<p>Place at the path set in <code class="language-plaintext highlighter-rouge">_data/authors.yml</code> under <code class="language-plaintext highlighter-rouge">image:</code>. Recommended: 400 √ó 400 px, square crop, JPEG.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>assets/images/authors/jane-smith.jpg
</code></pre></div></div>

<p>If no image is set (or the key is empty), a placeholder avatar SVG is shown.</p>

<hr />

<h2 id="22-drafts-workflow">22. Drafts workflow</h2>

<p>Drafts live in <code class="language-plaintext highlighter-rouge">_drafts/</code> and are excluded from the production build. They are committed to git for version control and backup.</p>

<h3 id="creating-a-draft">Creating a draft</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run new <span class="nt">--</span> <span class="s2">"My Post Title"</span>
</code></pre></div></div>

<p>Creates <code class="language-plaintext highlighter-rouge">_drafts/my-post-title.md</code> with a complete front matter template. The filename is auto-slugified from the title.</p>

<h3 id="previewing-drafts-locally">Previewing drafts locally</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run preview
</code></pre></div></div>

<p>Runs <code class="language-plaintext highlighter-rouge">bundle exec jekyll serve --drafts</code> ‚Äî drafts are rendered as if they were published posts, using today‚Äôs date as their date.</p>

<h3 id="publishing-a-draft">Publishing a draft</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run publish <span class="nt">--</span> my-post-title.md
</code></pre></div></div>

<p>Moves <code class="language-plaintext highlighter-rouge">_drafts/my-post-title.md</code> to <code class="language-plaintext highlighter-rouge">_posts/YYYY-MM-DD-my-post-title.md</code> using today‚Äôs date. The post is then included in the next build.</p>

<h3 id="listing-available-drafts">Listing available drafts</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run publish
</code></pre></div></div>

<p>Running without an argument prints the list of available draft filenames.</p>

<h3 id="workflow-summary">Workflow summary</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run new -- "Draft title"     # create
npm run preview                  # review locally
# edit _drafts/draft-title.md
npm run publish -- draft-title.md   # ship it
git add _posts/ &amp;&amp; git commit ...   # commit and push
</code></pre></div></div>

<hr />

<h2 id="appendix-front-matter-quick-reference">Appendix: front matter quick reference</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="c1"># ‚îÄ‚îÄ Required ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">post</span>                   <span class="c1"># post | essay | page | default</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Title"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s">2026-03-01</span>

<span class="c1"># ‚îÄ‚îÄ Common optional ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="na">excerpt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">One</span><span class="nv"> </span><span class="s">sentence."</span>
<span class="na">categories</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Topic</span><span class="pi">]</span>            <span class="c1"># One per post recommended</span>
<span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">tag1</span><span class="pi">,</span> <span class="nv">tag2</span><span class="pi">,</span> <span class="nv">tag3</span><span class="pi">]</span>
<span class="na">author</span><span class="pi">:</span> <span class="s">Name</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">/assets/images/img.jpg</span>
<span class="na">image_alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Alt</span><span class="nv"> </span><span class="s">text"</span>
<span class="na">image_caption</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Caption"</span>
<span class="na">featured</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">updated</span><span class="pi">:</span> <span class="s">2026-03-15</span>
<span class="na">comments</span><span class="pi">:</span> <span class="kc">true</span>

<span class="c1"># ‚îÄ‚îÄ Series ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="na">series</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Series</span><span class="nv"> </span><span class="s">Name"</span>
<span class="na">series_order</span><span class="pi">:</span> <span class="m">1</span>

<span class="c1"># ‚îÄ‚îÄ Viz flags (optional ‚Äî auto-detected from content) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="na">math</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">diagram</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">viz</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">d3</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">leaflet</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">geo</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">story</span><span class="pi">:</span> <span class="kc">true</span>                    <span class="c1"># Essay only ‚Äî enables scrollytelling</span>

<span class="c1"># ‚îÄ‚îÄ Gallery (see ¬ß20) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="na">gallery</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">src</span><span class="pi">:</span> <span class="s">/assets/images/posts/photo.jpg</span>
    <span class="na">alt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Alt</span><span class="nv"> </span><span class="s">text"</span>
    <span class="na">caption</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Optional</span><span class="nv"> </span><span class="s">caption"</span>  <span class="c1"># shown in lightbox</span>
<span class="nn">---</span>
</code></pre></div></div>

<hr />

<h2 id="appendix-viz-element-quick-reference">Appendix: viz element quick reference</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- KaTeX: inline --&gt;</span>
$f(x) = x^2$

<span class="c">&lt;!-- KaTeX: display --&gt;</span>
$$\int_0^\infty e^{-x}\,dx = 1$$

<span class="c">&lt;!-- Mermaid diagram --&gt;</span>
```mermaid
graph LR; A--&gt;B--&gt;C
</code></pre></div></div>

<!-- ECharts (any ECharts option) -->
<div data-viz="echarts" style="height:300px" data-options="{&quot;series&quot;:[{&quot;type&quot;:&quot;bar&quot;,&quot;data&quot;:[1,2,3]}], &quot;xAxis&quot;:{&quot;type&quot;:&quot;category&quot;,&quot;data&quot;:[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;]}, &quot;yAxis&quot;:{&quot;type&quot;:&quot;value&quot;}}"></div>

<!-- D3 bar -->
<div data-d3="bar" style="height:260px" data-options="{&quot;data&quot;:[{&quot;label&quot;:&quot;A&quot;,&quot;value&quot;:10}]}"></div>

<!-- D3 line -->
<div data-d3="line" style="height:260px" data-options="{&quot;data&quot;:[{&quot;x&quot;:2020,&quot;value&quot;:1},{&quot;x&quot;:2024,&quot;value&quot;:4}]}"></div>

<!-- D3 force graph -->
<div data-d3="force" style="height:340px" data-options="{&quot;data&quot;:{&quot;nodes&quot;:[{&quot;id&quot;:&quot;A&quot;},{&quot;id&quot;:&quot;B&quot;}],&quot;links&quot;:[{&quot;source&quot;:&quot;A&quot;,&quot;target&quot;:&quot;B&quot;}]}}"></div>

<!-- Ricker model widget -->
<div data-viz="ricker" style="height:360px;"></div>

<!-- Leaflet map -->
<div data-leaflet="" style="height:400px" data-lat="51.5" data-lng="-0.09" data-zoom="12" data-tiles="carto"></div>

<!-- Mapbox map -->
<div data-map="london" data-token="pk.eyJ..." style="height:400px;"></div>
<p>```</p>

      </div>

      <!-- essay-footer-notes.html ‚Äî References / endnotes section.
     Hidden by default; assets/js/essay/core.js shows it and populates
     #essay-endnotes-list from [data-cite] elements in the content.

     In posts, create citation markers with:
       <cite data-cite="Author, Title, URL">1</cite>
     The JS collects these and renders a numbered reference list here. -->

<footer class="essay-endnotes" id="essay-endnotes" aria-label="References" hidden>
  <div class="essay-endnotes-inner">
    <h2 class="essay-endnotes-heading">References</h2>
    <ol class="essay-endnotes-list" id="essay-endnotes-list">
      <!-- Populated at runtime by assets/js/essay/core.js buildEndnotes() -->
    </ol>
  </div>
</footer>


      <!-- subscribe-cta.html ‚Äî RSS/newsletter call to action, shown at end of posts -->
<aside class="subscribe-cta" aria-label="Subscribe">
  <div class="subscribe-cta-inner">
    <div class="subscribe-cta-text">
      <strong class="subscribe-cta-heading">Enjoyed this?</strong>
      <p class="subscribe-cta-body">New essays on computational thinking, environmental modelling, and the mathematics of complex systems.</p>
    </div>
    <a href="/feed.xml" class="subscribe-cta-btn" rel="noopener noreferrer">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>
      </svg>
      Subscribe via RSS
    </a>
  </div>
</aside>

      

      













<aside class="related-posts" aria-label="Related articles">
  <h2 class="related-posts-heading">Related</h2>
  <div class="related-posts-grid">
    
    <a href="/welcome-to-loom/" class="related-post-card">
      
      <div class="related-post-img" style="background-image:url('/assets/images/og-default.png')"></div>
      
      <div class="related-post-body">
        
        <span class="related-post-tag">meta</span>
        
        <h3 class="related-post-title">What Loom Is and How It Works</h3>
        <time class="related-post-date" datetime="2026-02-24">24 Feb 2026</time>
      </div>
    </a>
    
    <a href="/scrollytelling-with-maps-and-charts/" class="related-post-card">
      
      <div class="related-post-img" style="background-image:url('/assets/images/og-default.png')"></div>
      
      <div class="related-post-body">
        
        <span class="related-post-tag">meta</span>
        
        <h3 class="related-post-title">Scrollytelling with Maps and Charts</h3>
        <time class="related-post-date" datetime="2026-02-27">27 Feb 2026</time>
      </div>
    </a>
    
    <a href="/sample-presentation/" class="related-post-card">
      
      <div class="related-post-img" style="background-image:url('/assets/images/og-default.png')"></div>
      
      <div class="related-post-body">
        
        <span class="related-post-tag">meta</span>
        
        <h3 class="related-post-title">Introducing Loom</h3>
        <time class="related-post-date" datetime="2026-02-28">28 Feb 2026</time>
      </div>
    </a>
    
  </div>
</aside>



    </article>
  </main>

  <aside
    class="essay-sidenotes"
    id="essay-sidenotes"
    aria-label="Margin notes"
  ></aside>

</div>

</div>

<footer>
  <div class="footer-inner">

    <!-- Col 1: Brand -->
    <div class="footer-brand">
      <div class="footer-brand-logo">
        <img loading="lazy" src="/assets/images/loom_collective.jpg" alt="Loom" width="28" height="28">
        Loom<span>.</span>
      </div>
      
      <p class="footer-brand-desc">Jekyll theme. Clean typography, dark mode, computational essays.</p>
      

      <div class="footer-social">
        
        
        <a href="/feed.xml" class="social-icon" target="_blank" rel="noopener noreferrer" aria-label="RSS feed">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 11a9 9 0 0 1 9 9"/>
            <path d="M4 4a16 16 0 0 1 16 16"/>
            <circle cx="5" cy="19" r="1"/>
          </svg>
        </a>
      </div>
    </div>

    <!-- Col 2: Topics -->
    <nav aria-labelledby="footer-topics">
      <h3 class="footer-col-title" id="footer-topics">Topics</h3>
      <ul class="footer-links">
        
        <li><a href="/topic/ecology/">ecology</a></li>
        
        <li><a href="/topic/meta/">meta</a></li>
        
        <li><a href="/topic/science/">science</a></li>
        
      </ul>
    </nav>

    <!-- Col 3: Secondary navigation -->
    
    <nav aria-labelledby="footer-company">
      <h3 class="footer-col-title" id="footer-company">Company</h3>
      <ul class="footer-links">
        
        <li><a href="/about/">About</a></li>
        
        <li><a href="/feed.xml">RSS</a></li>
        
      </ul>
    </nav>
    

    <!-- Col 4: Resources -->
    <nav aria-labelledby="footer-resources">
      <h3 class="footer-col-title" id="footer-resources">Resources</h3>
      <ul class="footer-links">
        <li><a href="/archive/">Archive</a></li>
        <li><a href="/feed.xml">RSS Feed</a></li>
        <li><a href="/topics/">All Topics</a></li>
      </ul>
    </nav>

  </div><!-- /.footer-inner -->

  <div class="footer-bottom">
    <span class="footer-copy">
      &copy; 2026 Loom.
    </span>
    <div class="footer-legal">
      <a href="/privacy/">Privacy Policy</a>
      <a href="/terms/">Terms of Service</a>
    </div>
  </div>

</footer>


<!-- Alpine.js bundle -->
<script type="module" src="/assets/built/main.js"></script>

<!-- Visualization runtime ‚Äî detects and loads CDN libraries dynamically -->
<script type="module" src="/assets/js/core.js"></script>

<!-- Search overlay ‚Äî event-driven: nav button $dispatches 'search:open' -->
<div
  x-data="search"
  x-init="init()"
  @search:open.window="open()"
>
  <div
    class="search-overlay"
    x-show="isOpen"
    x-transition:enter="transition ease-out duration-150"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click.self="close()"
    style="display: none;"
    role="dialog"
    aria-modal="true"
    aria-label="Search"
  >
    <div class="search-panel">
      <div class="search-input-wrap">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
        <input
          class="search-input"
          type="search"
          placeholder="Search posts‚Ä¶"
          x-model="query"
          x-ref="input"
          @input.debounce.300ms="runSearch()"
          @keydown.escape="close()"
          autocomplete="off"
          spellcheck="false"
          aria-label="Search query"
        >
        <kbd class="search-esc" aria-hidden="true">ESC</kbd>
      </div>

      <div class="search-results" x-show="query.trim().length > 0">
        <div class="search-status" x-show="loading" aria-live="polite">Searching‚Ä¶</div>
        <div class="search-status" x-show="!loading && results.length === 0" aria-live="polite">
          No results for "<span x-text="query"></span>"
        </div>
        <ul class="search-result-list" x-show="!loading && results.length > 0" role="list">
          <template x-for="result in results" :key="result.url">
            <li>
              <a :href="result.url" class="search-result-item" @click="close()">
                <div class="search-result-title" x-text="result.meta?.title || result.url"></div>
                <div class="search-result-excerpt" x-html="result.excerpt"></div>
              </a>
            </li>
          </template>
        </ul>
      </div>
    </div>
  </div>
</div>

</body>
</html>

<!DOCTYPE html>

<html lang="en" data-brand="subhaus" data-theme="dark">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scrollytelling with Maps and Charts — subhaus95</title>
<meta name="description" content="How to build scroll-driven stories that update Leaflet maps and D3 charts as the reader scrolls through the narrative.">

<!-- Dark mode flash prevention — runs synchronously before first paint -->
<script>
  (function () {
    var defaultDark = 'dark' === 'dark';
    var s = localStorage.getItem('theme');
    var dark = s !== null ? s === 'dark' : defaultDark;
    document.documentElement.dataset.theme = dark ? 'dark' : 'light';
  })();
</script>

<!-- Preconnect to CDN domains used by the viz runtime -->
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="preconnect" href="https://unpkg.com">
<link rel="preconnect" href="https://esm.sh">
<link rel="preconnect" href="https://api.mapbox.com">
<link rel="preconnect" href="https://events.mapbox.com">



<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap" rel="stylesheet">

<!-- Theme stylesheet (Vite build output) -->
<link rel="stylesheet" href="/assets/dist/main.css">

<!-- Brand token overrides — loaded after main.css so variables cascade correctly -->

<link rel="stylesheet" href="/assets/css/brand-subhaus.css">



<!-- Syntax highlighting (Rouge — light + dark) -->
<link rel="stylesheet" href="/assets/css/syntax.css">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Scrollytelling with Maps and Charts | subhaus95</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Scrollytelling with Maps and Charts" />
<meta name="author" content="Paul Hobson" />
<meta property="og:locale" content="en" />
<meta name="description" content="How to build scroll-driven stories that update Leaflet maps and D3 charts as the reader scrolls through the narrative." />
<meta property="og:description" content="How to build scroll-driven stories that update Leaflet maps and D3 charts as the reader scrolls through the narrative." />
<link rel="canonical" href="https://subhaus95.github.io/scrollytelling-with-maps-and-charts/" />
<meta property="og:url" content="https://subhaus95.github.io/scrollytelling-with-maps-and-charts/" />
<meta property="og:site_name" content="subhaus95" />
<meta property="og:image" content="https://subhaus95.github.io/assets/images/og-default.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2026-02-27T00:00:00-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://subhaus95.github.io/assets/images/og-default.png" />
<meta property="twitter:title" content="Scrollytelling with Maps and Charts" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Paul Hobson"},"dateModified":"2026-02-25T14:30:52-07:00","datePublished":"2026-02-27T00:00:00-07:00","description":"How to build scroll-driven stories that update Leaflet maps and D3 charts as the reader scrolls through the narrative.","headline":"Scrollytelling with Maps and Charts","image":"https://subhaus95.github.io/assets/images/og-default.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://subhaus95.github.io/scrollytelling-with-maps-and-charts/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://subhaus95.github.io/assets/images/og-default.png"},"name":"Paul Hobson"},"url":"https://subhaus95.github.io/scrollytelling-with-maps-and-charts/"}</script>
<!-- End Jekyll SEO tag -->




</head>
<body class="
  essay-template
   tag-meta
  
  
  
  
   tag-hash-leaflet
   tag-hash-d3
   tag-hash-story
">

<a href="#main-content" class="skip-link">Skip to content</a>

<header class="nav" x-data="{ open: false }">
  <div class="nav-inner">

    <!-- Logo -->
    <a href="/" class="nav-logo">
      
      <img loading="lazy" src="/assets/images/og-default.png" alt="subhaus95" width="32" height="32">
      
      subhaus95<span>.</span>
    </a>

    <!-- Desktop nav links -->
    <ul class="nav-links" role="list">
      
      <li>
        <a href="/now/">Now</a>
      </li>
      
      <li>
        <a href="/notes/">Notes</a>
      </li>
      
      <li>
        <a href="/builds/">Builds</a>
      </li>
      
      <li>
        <a href="/stack/">Stack</a>
      </li>
      
      <li>
        <a href="/archive/">Archive</a>
      </li>
      
    </ul>

    <!-- Actions -->
    <div class="nav-actions">

      <!-- Search button -->
      <button
        class="search-toggle"
        type="button"
        aria-label="Search (⌘K)"
        title="Search (⌘K)"
        @click="$dispatch('search:open')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
      </button>

      <!-- Dark mode toggle -->
      <button
        class="theme-toggle"
        x-data="darkMode"
        x-init="init()"
        @click="toggle()"
        :aria-label="dark ? 'Switch to light mode' : 'Switch to dark mode'"
        type="button"
      >
        <!-- Sun icon (shown in light mode) -->
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <!-- Moon icon (shown in dark mode) -->
        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>

      <!-- Hamburger (mobile only) -->
      <button
        class="mobile-nav-toggle"
        @click="open = !open"
        :aria-expanded="open"
        :aria-label="open ? 'Close menu' : 'Open menu'"
        type="button"
      >
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
        <svg x-show="open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>

    </div><!-- /.nav-actions -->
  </div><!-- /.nav-inner -->

  <!-- Mobile drawer -->
  <div
    class="mobile-nav"
    x-show="open"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-1"
    x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 -translate-y-1"
    @click.outside="open = false"
    @keydown.escape.window="open = false"
  >
    <ul role="list">
      
      <li>
        <a href="/now/" @click="open = false">Now</a>
      </li>
      
      <li>
        <a href="/notes/" @click="open = false">Notes</a>
      </li>
      
      <li>
        <a href="/builds/" @click="open = false">Builds</a>
      </li>
      
      <li>
        <a href="/stack/" @click="open = false">Stack</a>
      </li>
      
      <li>
        <a href="/archive/" @click="open = false">Archive</a>
      </li>
      
    </ul>
  </div><!-- /.mobile-nav -->

</header>


<div id="main-content">
  <!-- Essay stylesheet and runtime — self-contained -->
<link rel="stylesheet" href="/assets/css/essay.css">
<script type="module" src="/assets/js/essay/core.js"></script>

<div class="essay-layout" id="essay-layout">

  <!-- essay-toc.html — Sticky table of contents (left column).
     The <ol> is empty on load; assets/js/essay/core.js populates it
     from h2/h3 elements found in #essay-content after the page renders. -->

<nav class="essay-toc" id="essay-toc" aria-label="Table of contents">
  <div class="essay-toc-inner">
    <p class="essay-toc-heading" aria-hidden="true">Contents</p>
    <ol class="essay-toc-list" id="essay-toc-list">
      <!-- Populated at runtime by assets/js/essay/core.js buildToc() -->
    </ol>
  </div>
</nav>


  <main class="essay-main" id="essay-main" role="main">
    <article class="essay-article">

      <!-- essay-hero.html — Header for computational essay template.
     Displays feature image, tag label, title, excerpt, and post metadata. -->

<header class="essay-hero">
  
  <figure class="essay-hero-figure">
    <img
      src="/assets/images/og-default.png"
      alt="Scrollytelling with Maps and Charts"
      class="essay-hero-img"
      loading="eager"
    >
    
  </figure>
  

  <div class="essay-hero-body">
    
    <a href="/topic/meta/" class="essay-tag-label">meta</a>
    

    <h1 class="essay-title">Scrollytelling with Maps and Charts</h1>

    
    <p class="essay-excerpt">How to build scroll-driven stories that update Leaflet maps and D3 charts as the reader scrolls through the narrative.</p>
    

    <div class="essay-meta">
      <div class="essay-authors">
        <span class="essay-author">
          
          








  
  
    
<a href="/author/paul-hobson/" class="author-link">Paul Hobson</a>
    
  
  


        </span>
      </div>
      <div class="essay-meta-secondary">
        <time class="essay-date" datetime="2026-02-27">27 Feb 2026</time>
        
        
        <span class="essay-sep" aria-hidden="true">·</span>
        <span class="essay-updated">Updated <time datetime="2026-02-25">25 Feb 2026</time></span>
        
        <span class="essay-sep" aria-hidden="true">·</span>
        <span class="essay-reading-time">5 min read</span>
      </div>
    </div>
  </div>
</header>


      


<nav class="series-nav" aria-label="Series: Building Loom">
  <div class="series-nav-header">
    <span class="series-nav-label">Series</span>
    <span class="series-nav-title">Building Loom</span>
  </div>
  <ol class="series-nav-list">
    
    <li class="series-nav-item">
      
      <a href="/welcome-to-loom/" class="series-nav-link">
        <span class="series-nav-number">1</span>
        What Loom Is and How It Works
      </a>
      
    </li>
    
    <li class="series-nav-item">
      
      <a href="/rendering-mathematics-and-diagrams/" class="series-nav-link">
        <span class="series-nav-number">2</span>
        Rendering Mathematics and Diagrams
      </a>
      
    </li>
    
    <li class="series-nav-item">
      
      <a href="/interactive-charts-echarts-and-d3/" class="series-nav-link">
        <span class="series-nav-number">3</span>
        Interactive Charts with ECharts and D3
      </a>
      
    </li>
    
    <li class="series-nav-item series-nav-item--current">
      
      <span class="series-nav-link series-nav-link--current" aria-current="page">
        <span class="series-nav-number">4</span>
        Scrollytelling with Maps and Charts
      </span>
      
    </li>
    
    <li class="series-nav-item">
      
      <a href="/mapbox-gl-interactive-maps/" class="series-nav-link">
        <span class="series-nav-number">5</span>
        Interactive Maps with Mapbox GL JS
      </a>
      
    </li>
    
    <li class="series-nav-item">
      
      <a href="/documenting-fieldwork-media-and-embeds/" class="series-nav-link">
        <span class="series-nav-number">6</span>
        Documenting Fieldwork: Photos, Video, and Embedded Media
      </a>
      
    </li>
    
  </ol>
</nav>




      <div class="essay-content gh-content" id="essay-content">
        <p>Scroll-driven stories pin a visualisation on screen while the reader scrolls through prose. Each “step” in the story can trigger an update — flying a map to a new location, updating chart data, or changing the state of any registered visualisation.</p>

<p>This essay demonstrates two scrolly patterns: a <strong>Leaflet map</strong> that flies between cities, and a <strong>D3 bar chart</strong> that updates as the story progresses.</p>

<hr />

<h2 id="standalone-leaflet-map">Standalone Leaflet map</h2>

<p>Before the scrolly examples, here is a basic Leaflet map with the CartoDB light tile layer. No JavaScript is required in the post — just a <code class="language-plaintext highlighter-rouge">data-leaflet</code> element.</p>

<div data-leaflet="" style="height:360px" data-lat="51.505" data-lng="-0.09" data-zoom="11" data-tiles="carto" data-markers="[{&quot;lat&quot;:51.505,&quot;lng&quot;:-0.09,&quot;label&quot;:&quot;Centre point&quot;}]"></div>

<p>The <code class="language-plaintext highlighter-rouge">data-markers</code> attribute accepts a JSON array of <code class="language-plaintext highlighter-rouge">{lat, lng, label}</code> objects. Clicking a marker opens a popup.</p>

<p>Available tile presets: <code class="language-plaintext highlighter-rouge">osm</code> (default OpenStreetMap), <code class="language-plaintext highlighter-rouge">carto</code> (CartoDB Positron light), <code class="language-plaintext highlighter-rouge">carto-dark</code>, <code class="language-plaintext highlighter-rouge">stadia</code>.</p>

<hr />

<h2 id="scrolly-story-map-flyto">Scrolly story: map flyTo</h2>

<p>The pattern requires a <code class="language-plaintext highlighter-rouge">.story-section</code> containing a <code class="language-plaintext highlighter-rouge">.story-sticky</code> (the pinned graphic) and <code class="language-plaintext highlighter-rouge">.story-steps</code> (the scrollable prose). Give the viz element an <code class="language-plaintext highlighter-rouge">id</code>, then add <code class="language-plaintext highlighter-rouge">data-update</code> JSON to each step targeting that id.</p>

<section class="story-section">
  <div class="story-sticky">
    <div class="story-graphic">
      <div data-leaflet="" id="city-map" data-lat="51.505" data-lng="-0.09" data-zoom="11" data-tiles="carto"></div>
    </div>
  </div>
  <div class="story-steps">

    <div class="story-step" data-step="0" data-update="{&quot;city-map&quot;: {&quot;lat&quot;: 51.505, &quot;lng&quot;: -0.09, &quot;zoom&quot;: 11}}">
      <p><strong>London.</strong> The Thames cuts through 32 boroughs. At zoom level 11 the full extent of inner London sits comfortably in frame — from Heathrow in the west to the Isle of Dogs in the east.</p>
    </div>

    <div class="story-step" data-step="1" data-update="{&quot;city-map&quot;: {&quot;lat&quot;: 48.8566, &quot;lng&quot;: 2.3522, &quot;zoom&quot;: 12}}">
      <p><strong>Paris.</strong> Scroll down and the map flies south-east to the French capital. The périphérique ring road defines the boundary of the city proper. Zoom level 12 shows the arrondissement grid.</p>
    </div>

    <div class="story-step" data-step="2" data-update="{&quot;city-map&quot;: {&quot;lat&quot;: 52.52, &quot;lng&quot;: 13.405, &quot;zoom&quot;: 12}}">
      <p><strong>Berlin.</strong> Reunified in 1990, Berlin covers 892 km² — nine times the area of Paris. The Spree and Havel rivers wind through the city. Zoom 12 shows the inner Ringbahn.</p>
    </div>

    <div class="story-step" data-step="3" data-update="{&quot;city-map&quot;: {&quot;lat&quot;: 41.3851, &quot;lng&quot;: 2.1734, &quot;zoom&quot;: 13}}">
      <p><strong>Barcelona.</strong> Ildefons Cerdà's 1860 Eixample grid is visible at zoom 13 — perfect octagonal blocks, each 113 m per side, designed to equalise light and air for all residents.</p>
    </div>

  </div>
</section>

<p>Each step’s <code class="language-plaintext highlighter-rouge">data-update</code> value is a JSON object keyed by element id. When Scrollama fires <code class="language-plaintext highlighter-rouge">story:step</code> for a step, <code class="language-plaintext highlighter-rouge">core.js</code> reads the <code class="language-plaintext highlighter-rouge">data-update</code>, looks up each referenced element in its instance store, and calls the matching adapter’s <code class="language-plaintext highlighter-rouge">update()</code> function. For Leaflet that calls <code class="language-plaintext highlighter-rouge">map.flyTo()</code> with a 1.5-second animation.</p>

<hr />

<h2 id="scrolly-story-d3-bar-chart">Scrolly story: D3 bar chart</h2>

<p>The same <code class="language-plaintext highlighter-rouge">data-update</code> pattern works with D3 charts. The <code class="language-plaintext highlighter-rouge">data</code> key replaces the chart’s dataset with a smooth transition.</p>

<section class="story-section">
  <div class="story-sticky">
    <div class="story-graphic">
      <div data-d3="bar" id="energy-chart" data-options="{
             &quot;data&quot;: [
               {&quot;label&quot;:&quot;Coal&quot;,    &quot;value&quot;: 9},
               {&quot;label&quot;:&quot;Gas&quot;,     &quot;value&quot;: 23},
               {&quot;label&quot;:&quot;Nuclear&quot;, &quot;value&quot;: 10},
               {&quot;label&quot;:&quot;Hydro&quot;,   &quot;value&quot;: 16},
               {&quot;label&quot;:&quot;Solar&quot;,   &quot;value&quot;: 14},
               {&quot;label&quot;:&quot;Wind&quot;,    &quot;value&quot;: 14}
             ]
           }"></div>
    </div>
  </div>
  <div class="story-steps">

    <div class="story-step" data-step="0" data-update="{&quot;energy-chart&quot;: {&quot;data&quot;: [
           {&quot;label&quot;:&quot;Coal&quot;,    &quot;value&quot;: 9},
           {&quot;label&quot;:&quot;Gas&quot;,     &quot;value&quot;: 23},
           {&quot;label&quot;:&quot;Nuclear&quot;, &quot;value&quot;: 10},
           {&quot;label&quot;:&quot;Hydro&quot;,   &quot;value&quot;: 16},
           {&quot;label&quot;:&quot;Solar&quot;,   &quot;value&quot;: 14},
           {&quot;label&quot;:&quot;Wind&quot;,    &quot;value&quot;: 14}
         ]}}">
      <p><strong>2010 global electricity generation (%).</strong> Gas and coal together supply roughly a third of the world's electricity. Renewables are barely visible at this scale — solar is a rounding error.</p>
    </div>

    <div class="story-step" data-step="1" data-update="{&quot;energy-chart&quot;: {&quot;data&quot;: [
           {&quot;label&quot;:&quot;Coal&quot;,    &quot;value&quot;: 20},
           {&quot;label&quot;:&quot;Gas&quot;,     &quot;value&quot;: 23},
           {&quot;label&quot;:&quot;Nuclear&quot;, &quot;value&quot;: 10},
           {&quot;label&quot;:&quot;Hydro&quot;,   &quot;value&quot;: 15},
           {&quot;label&quot;:&quot;Solar&quot;,   &quot;value&quot;: 5},
           {&quot;label&quot;:&quot;Wind&quot;,    &quot;value&quot;: 8}
         ]}}">
      <p><strong>2015.</strong> Solar and wind have both grown meaningfully. Coal is still rising in absolute terms as global demand grows faster than clean capacity is added. The energy transition is underway but not dominant.</p>
    </div>

    <div class="story-step" data-step="2" data-update="{&quot;energy-chart&quot;: {&quot;data&quot;: [
           {&quot;label&quot;:&quot;Coal&quot;,    &quot;value&quot;: 36},
           {&quot;label&quot;:&quot;Gas&quot;,     &quot;value&quot;: 22},
           {&quot;label&quot;:&quot;Nuclear&quot;, &quot;value&quot;: 10},
           {&quot;label&quot;:&quot;Hydro&quot;,   &quot;value&quot;: 15},
           {&quot;label&quot;:&quot;Solar&quot;,   &quot;value&quot;: 12},
           {&quot;label&quot;:&quot;Wind&quot;,    &quot;value&quot;: 13}
         ]}}">
      <p><strong>2020.</strong> Solar and wind together now rival nuclear. Coal peaks in share terms. The cost curves for solar have crossed every optimistic projection made a decade earlier.</p>
    </div>

    <div class="story-step" data-step="3" data-update="{&quot;energy-chart&quot;: {&quot;data&quot;: [
           {&quot;label&quot;:&quot;Coal&quot;,    &quot;value&quot;: 35},
           {&quot;label&quot;:&quot;Gas&quot;,     &quot;value&quot;: 22},
           {&quot;label&quot;:&quot;Nuclear&quot;, &quot;value&quot;: 9},
           {&quot;label&quot;:&quot;Hydro&quot;,   &quot;value&quot;: 14},
           {&quot;label&quot;:&quot;Solar&quot;,   &quot;value&quot;: 23},
           {&quot;label&quot;:&quot;Wind&quot;,    &quot;value&quot;: 14}
         ]}}">
      <p><strong>2024.</strong> Solar overtakes coal in new capacity additions for the first time. The transition is now an economic story, not just an environmental one — solar is the cheapest electricity source ever built.</p>
    </div>

  </div>
</section>

<hr />

<h2 id="how-the-wiring-works">How the wiring works</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>narrative.js
  │  Scrollama fires onStepEnter
  │  → sets data-active on step element
  │  → dispatches story:step(bubbles: true, detail: { element, index, step })
  ▼
core.js  (document-level listener)
  │  reads detail.element.dataset.update  → JSON
  │  for each { id: data } entry:
  │    instances.get(id) → { entry, el, instance }
  │    entry.update(el, data, instance)
  ▼
Adapter update functions
  Leaflet → map.flyTo([lat, lng], zoom, { duration: 1.5 })
  D3      → chart.update(data)  (built-in transition: 600ms)
  ECharts → instance.setOption(data, false)  (merge mode)
</code></pre></div></div>

<h3 id="adding-update-support-to-a-custom-d3-chart">Adding update support to a custom D3 chart</h3>

<p>When you register a custom chart type, return an <code class="language-plaintext highlighter-rouge">update</code> method from the factory:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">registerD3Chart</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeline</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// … render initial state …</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nf">update</span><span class="p">(</span><span class="nx">newData</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Apply newData with transitions</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Then <code class="language-plaintext highlighter-rouge">core.js</code> will route <code class="language-plaintext highlighter-rouge">data-update</code> JSON to <code class="language-plaintext highlighter-rouge">chart.update()</code> automatically.</p>

      </div>

      <!-- essay-footer-notes.html — References / endnotes section.
     Hidden by default; assets/js/essay/core.js shows it and populates
     #essay-endnotes-list from [data-cite] elements in the content.

     In posts, create citation markers with:
       <cite data-cite="Author, Title, URL">1</cite>
     The JS collects these and renders a numbered reference list here. -->

<footer class="essay-endnotes" id="essay-endnotes" aria-label="References" hidden>
  <div class="essay-endnotes-inner">
    <h2 class="essay-endnotes-heading">References</h2>
    <ol class="essay-endnotes-list" id="essay-endnotes-list">
      <!-- Populated at runtime by assets/js/essay/core.js buildEndnotes() -->
    </ol>
  </div>
</footer>


      <!-- subscribe-cta.html — RSS/newsletter call to action, shown at end of posts -->
<aside class="subscribe-cta" aria-label="Subscribe">
  <div class="subscribe-cta-inner">
    <div class="subscribe-cta-text">
      <strong class="subscribe-cta-heading">Enjoyed this?</strong>
      <p class="subscribe-cta-body">New essays on computational thinking, environmental modelling, and the mathematics of complex systems.</p>
    </div>
    <a href="/feed.xml" class="subscribe-cta-btn" rel="noopener noreferrer">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>
      </svg>
      Subscribe via RSS
    </a>
  </div>
</aside>

      

      













<aside class="related-posts" aria-label="Related articles">
  <h2 class="related-posts-heading">Related</h2>
  <div class="related-posts-grid">
    
    <a href="/welcome-to-loom/" class="related-post-card">
      
      <div class="related-post-img" style="background-image:url('/assets/images/og-default.png')"></div>
      
      <div class="related-post-body">
        
        <span class="related-post-tag">meta</span>
        
        <h3 class="related-post-title">What Loom Is and How It Works</h3>
        <time class="related-post-date" datetime="2026-02-24">24 Feb 2026</time>
      </div>
    </a>
    
    <a href="/sample-presentation/" class="related-post-card">
      
      <div class="related-post-img" style="background-image:url('/assets/images/og-default.png')"></div>
      
      <div class="related-post-body">
        
        <span class="related-post-tag">meta</span>
        
        <h3 class="related-post-title">Introducing Loom</h3>
        <time class="related-post-date" datetime="2026-02-28">28 Feb 2026</time>
      </div>
    </a>
    
    <a href="/rendering-mathematics-and-diagrams/" class="related-post-card">
      
      <div class="related-post-img" style="background-image:url('/assets/images/og-default.png')"></div>
      
      <div class="related-post-body">
        
        <span class="related-post-tag">meta</span>
        
        <h3 class="related-post-title">Rendering Mathematics and Diagrams</h3>
        <time class="related-post-date" datetime="2026-02-25">25 Feb 2026</time>
      </div>
    </a>
    
  </div>
</aside>



    </article>
  </main>

  <aside
    class="essay-sidenotes"
    id="essay-sidenotes"
    aria-label="Margin notes"
  ></aside>

</div>

</div>

<footer>
  <div class="footer-inner">

    <!-- Col 1: Brand -->
    <div class="footer-brand">
      <div class="footer-brand-logo">
        
        <img loading="lazy" src="/assets/images/og-default.png" alt="subhaus95" width="28" height="28">
        
        subhaus95<span>.</span>
      </div>
      
      <p class="footer-brand-desc">Homelab. Infrastructure experiments. Technical notes.</p>
      

      <div class="footer-social">
        
        
        <a href="/feed.xml" class="social-icon" target="_blank" rel="noopener noreferrer" aria-label="RSS feed">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 11a9 9 0 0 1 9 9"/>
            <path d="M4 4a16 16 0 0 1 16 16"/>
            <circle cx="5" cy="19" r="1"/>
          </svg>
        </a>
      </div>
    </div>

    <!-- Col 2: Topics -->
    <nav aria-labelledby="footer-topics">
      <h3 class="footer-col-title" id="footer-topics">Topics</h3>
      <ul class="footer-links">
        
        <li><a href="/topic/ecology/">ecology</a></li>
        
        <li><a href="/topic/meta/">meta</a></li>
        
        <li><a href="/topic/science/">science</a></li>
        
      </ul>
    </nav>

    <!-- Col 3: Secondary navigation -->
    
    <nav aria-labelledby="footer-company">
      <h3 class="footer-col-title" id="footer-company">Company</h3>
      <ul class="footer-links">
        
        <li><a href="/about/">About</a></li>
        
        <li><a href="/feed.xml">RSS</a></li>
        
      </ul>
    </nav>
    

    <!-- Col 4: Resources -->
    <nav aria-labelledby="footer-resources">
      <h3 class="footer-col-title" id="footer-resources">Resources</h3>
      <ul class="footer-links">
        <li><a href="/archive/">Archive</a></li>
        <li><a href="/feed.xml">RSS Feed</a></li>
        <li><a href="/topics/">All Topics</a></li>
      </ul>
    </nav>

  </div><!-- /.footer-inner -->

  <div class="footer-bottom">
    <span class="footer-copy">
      &copy; 2026 subhaus95.
    </span>
    <div class="footer-legal">
      <a href="/privacy/">Privacy Policy</a>
      <a href="/terms/">Terms of Service</a>
    </div>
  </div>

</footer>


<!-- Alpine.js bundle -->
<script type="module" src="/assets/dist/main.js"></script>

<!-- Visualization runtime — detects and loads CDN libraries dynamically -->
<script type="module" src="/assets/js/core.js"></script>

<!-- Search overlay — event-driven: nav button $dispatches 'search:open' -->
<div
  x-data="search"
  x-init="init()"
  @search:open.window="open()"
>
  <div
    class="search-overlay"
    x-show="isOpen"
    x-transition:enter="transition ease-out duration-150"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click.self="close()"
    style="display: none;"
    role="dialog"
    aria-modal="true"
    aria-label="Search"
  >
    <div class="search-panel">
      <div class="search-input-wrap">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
        <input
          class="search-input"
          type="search"
          placeholder="Search posts…"
          x-model="query"
          x-ref="input"
          @input.debounce.300ms="runSearch()"
          @keydown.escape="close()"
          autocomplete="off"
          spellcheck="false"
          aria-label="Search query"
        >
        <kbd class="search-esc" aria-hidden="true">ESC</kbd>
      </div>

      <div class="search-results" x-show="query.trim().length > 0">
        <div class="search-status" x-show="loading" aria-live="polite">Searching…</div>
        <div class="search-status" x-show="!loading && results.length === 0" aria-live="polite">
          No results for "<span x-text="query"></span>"
        </div>
        <ul class="search-result-list" x-show="!loading && results.length > 0" role="list">
          <template x-for="result in results" :key="result.url">
            <li>
              <a :href="result.url" class="search-result-item" @click="close()">
                <div class="search-result-title" x-text="result.meta?.title || result.url"></div>
                <div class="search-result-excerpt" x-html="result.excerpt"></div>
              </a>
            </li>
          </template>
        </ul>
      </div>
    </div>
  </div>
</div>

</body>
</html>
